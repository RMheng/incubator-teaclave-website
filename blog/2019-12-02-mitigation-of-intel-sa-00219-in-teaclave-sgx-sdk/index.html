<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mitigation of Intel-SA-00219 in Teaclave SGX SDK | Apache Teaclave (Incubating)</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="Apache Teaclave (incubating) is an open source universal secure computing platform, making computation on privacy-sensitive data safe and simple.">
    <meta property="article:published_time" content="2019-12-03T00:00:00.000Z">
    <meta property="article:modified_time" content="2020-10-25T00:02:18.000Z">
    <meta property="og:site_name" content="Apache Teaclave (Incubating)">
    <meta property="og:title" content="Mitigation of Intel-SA-00219 in Teaclave SGX SDK">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://teaclave.apache.org/blog/2019-12-02-mitigation-of-intel-sa-00219-in-teaclave-sgx-sdk/">
    <meta name="twitter:title" content="Mitigation of Intel-SA-00219 in Teaclave SGX SDK">
    <meta name="twitter:url" content="https://teaclave.apache.org/blog/2019-12-02-mitigation-of-intel-sa-00219-in-teaclave-sgx-sdk/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@ApacheTeaclave">
    <link rel="preload" href="/assets/css/0.styles.dc3f8652.css" as="style"><link rel="preload" href="/assets/js/app.25e473b1.js" as="script"><link rel="preload" href="/assets/js/9.363f0c58.js" as="script"><link rel="preload" href="/assets/js/1.dfc25e73.js" as="script"><link rel="preload" href="/assets/js/15.4dbaec29.js" as="script"><link rel="prefetch" href="/assets/js/10.79a85284.js"><link rel="prefetch" href="/assets/js/100.073a5309.js"><link rel="prefetch" href="/assets/js/101.162b1b89.js"><link rel="prefetch" href="/assets/js/102.cdbcb150.js"><link rel="prefetch" href="/assets/js/103.5f8d855a.js"><link rel="prefetch" href="/assets/js/104.cfc2fdf4.js"><link rel="prefetch" href="/assets/js/105.d845c2af.js"><link rel="prefetch" href="/assets/js/106.7a42f63d.js"><link rel="prefetch" href="/assets/js/107.7beda2d5.js"><link rel="prefetch" href="/assets/js/108.f509e0c7.js"><link rel="prefetch" href="/assets/js/109.b345d0e5.js"><link rel="prefetch" href="/assets/js/11.7bc1bcef.js"><link rel="prefetch" href="/assets/js/110.43830c57.js"><link rel="prefetch" href="/assets/js/111.3cb0e61e.js"><link rel="prefetch" href="/assets/js/112.58c56b97.js"><link rel="prefetch" href="/assets/js/113.942f7bc2.js"><link rel="prefetch" href="/assets/js/114.30b204dd.js"><link rel="prefetch" href="/assets/js/115.374ced31.js"><link rel="prefetch" href="/assets/js/116.8e2314cd.js"><link rel="prefetch" href="/assets/js/117.50385927.js"><link rel="prefetch" href="/assets/js/118.7e395978.js"><link rel="prefetch" href="/assets/js/119.2c3786e8.js"><link rel="prefetch" href="/assets/js/12.bc18d7ff.js"><link rel="prefetch" href="/assets/js/13.1639fc17.js"><link rel="prefetch" href="/assets/js/14.5d5c8f1b.js"><link rel="prefetch" href="/assets/js/16.ad3b842c.js"><link rel="prefetch" href="/assets/js/17.3271028f.js"><link rel="prefetch" href="/assets/js/18.d587cf69.js"><link rel="prefetch" href="/assets/js/19.358677a1.js"><link rel="prefetch" href="/assets/js/2.201304d3.js"><link rel="prefetch" href="/assets/js/20.912e4ba6.js"><link rel="prefetch" href="/assets/js/21.61c8197c.js"><link rel="prefetch" href="/assets/js/22.16f1de4e.js"><link rel="prefetch" href="/assets/js/23.a60a1944.js"><link rel="prefetch" href="/assets/js/24.3bd84312.js"><link rel="prefetch" href="/assets/js/25.5d4bf97d.js"><link rel="prefetch" href="/assets/js/26.3cc912cb.js"><link rel="prefetch" href="/assets/js/27.189662a2.js"><link rel="prefetch" href="/assets/js/28.d2510ace.js"><link rel="prefetch" href="/assets/js/29.fb3ae9b5.js"><link rel="prefetch" href="/assets/js/30.3cd6288e.js"><link rel="prefetch" href="/assets/js/31.0fcbf010.js"><link rel="prefetch" href="/assets/js/32.a87bab24.js"><link rel="prefetch" href="/assets/js/33.8fac761f.js"><link rel="prefetch" href="/assets/js/34.44195702.js"><link rel="prefetch" href="/assets/js/35.362a3e71.js"><link rel="prefetch" href="/assets/js/36.a8385838.js"><link rel="prefetch" href="/assets/js/37.c942e292.js"><link rel="prefetch" href="/assets/js/38.e770d271.js"><link rel="prefetch" href="/assets/js/39.18048d14.js"><link rel="prefetch" href="/assets/js/40.819c2f29.js"><link rel="prefetch" href="/assets/js/41.ec3f5688.js"><link rel="prefetch" href="/assets/js/42.60239b32.js"><link rel="prefetch" href="/assets/js/43.ae1652ed.js"><link rel="prefetch" href="/assets/js/44.17070749.js"><link rel="prefetch" href="/assets/js/45.343a328b.js"><link rel="prefetch" href="/assets/js/46.a2ab72a8.js"><link rel="prefetch" href="/assets/js/47.d30928b9.js"><link rel="prefetch" href="/assets/js/48.ec8e9cd4.js"><link rel="prefetch" href="/assets/js/49.14dc64fe.js"><link rel="prefetch" href="/assets/js/5.958b0ced.js"><link rel="prefetch" href="/assets/js/50.32ae8ed6.js"><link rel="prefetch" href="/assets/js/51.7ff62263.js"><link rel="prefetch" href="/assets/js/52.b1554fdb.js"><link rel="prefetch" href="/assets/js/53.2a520021.js"><link rel="prefetch" href="/assets/js/54.784d0754.js"><link rel="prefetch" href="/assets/js/55.fddbb0a9.js"><link rel="prefetch" href="/assets/js/56.1005af04.js"><link rel="prefetch" href="/assets/js/57.a26cbbff.js"><link rel="prefetch" href="/assets/js/58.2a38b772.js"><link rel="prefetch" href="/assets/js/59.78b9caf4.js"><link rel="prefetch" href="/assets/js/6.10959272.js"><link rel="prefetch" href="/assets/js/60.06a65190.js"><link rel="prefetch" href="/assets/js/61.75d2b701.js"><link rel="prefetch" href="/assets/js/62.4958e002.js"><link rel="prefetch" href="/assets/js/63.3ca9db09.js"><link rel="prefetch" href="/assets/js/64.3f3dfdc7.js"><link rel="prefetch" href="/assets/js/65.c86373d6.js"><link rel="prefetch" href="/assets/js/66.3ae201ea.js"><link rel="prefetch" href="/assets/js/67.5a8d20aa.js"><link rel="prefetch" href="/assets/js/68.44acf8b1.js"><link rel="prefetch" href="/assets/js/69.0a52e852.js"><link rel="prefetch" href="/assets/js/7.85bea464.js"><link rel="prefetch" href="/assets/js/70.6dc359ec.js"><link rel="prefetch" href="/assets/js/71.9b283aa1.js"><link rel="prefetch" href="/assets/js/72.e8e96716.js"><link rel="prefetch" href="/assets/js/73.86a9706e.js"><link rel="prefetch" href="/assets/js/74.46df55c2.js"><link rel="prefetch" href="/assets/js/75.2fa74a15.js"><link rel="prefetch" href="/assets/js/76.ae9eb335.js"><link rel="prefetch" href="/assets/js/77.dbc732de.js"><link rel="prefetch" href="/assets/js/78.ac6db1a0.js"><link rel="prefetch" href="/assets/js/79.52752c54.js"><link rel="prefetch" href="/assets/js/8.49d4e1eb.js"><link rel="prefetch" href="/assets/js/80.cb51f9e7.js"><link rel="prefetch" href="/assets/js/81.04cda50c.js"><link rel="prefetch" href="/assets/js/82.98ffa54a.js"><link rel="prefetch" href="/assets/js/83.a2519007.js"><link rel="prefetch" href="/assets/js/84.652aa5b8.js"><link rel="prefetch" href="/assets/js/85.9188f7c7.js"><link rel="prefetch" href="/assets/js/86.514029f6.js"><link rel="prefetch" href="/assets/js/87.310da9c2.js"><link rel="prefetch" href="/assets/js/88.8e146568.js"><link rel="prefetch" href="/assets/js/89.2924b6b0.js"><link rel="prefetch" href="/assets/js/90.6cf50ff7.js"><link rel="prefetch" href="/assets/js/91.1841c2d2.js"><link rel="prefetch" href="/assets/js/92.41c64540.js"><link rel="prefetch" href="/assets/js/93.2c5ff948.js"><link rel="prefetch" href="/assets/js/94.068f2aa1.js"><link rel="prefetch" href="/assets/js/95.153140c5.js"><link rel="prefetch" href="/assets/js/96.7f21092f.js"><link rel="prefetch" href="/assets/js/97.4f7398d6.js"><link rel="prefetch" href="/assets/js/98.c9811b15.js"><link rel="prefetch" href="/assets/js/99.c9a10862.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.989c2fd5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.dc3f8652.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Apache Teaclave (Incubating)</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/community/" class="nav-link">
  Community
</a></div><div class="nav-item"><a href="/download/" class="nav-link">
  Download
</a></div><div class="nav-item"><a href="/contributors/" class="nav-link">
  Contributors
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Documentation" class="dropdown-title"><span class="title">Documentation</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/" class="nav-link">
  Teaclave
</a></li><li class="dropdown-item"><!----> <a href="/sgx-sdk-docs/" class="nav-link">
  Teaclave SGX SDK
</a></li></ul></div></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  Blog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API Docs" class="dropdown-title"><span class="title">API Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/client-sdk-python/" target="_self" rel="" class="nav-link external">
  Teaclave Client SDK (Python)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/sgx-sdk/" target="_self" rel="" class="nav-link external">
  Teaclave SGX SDK
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/crates-enclave/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (Enclave)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/crates-app/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (App)
  <!----></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Repository" class="dropdown-title"><span class="title">Repository</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-sgx-sdk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave SGX SDK
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-website" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Apache Software Foundation" class="dropdown-title"><span class="title">ASF</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ASF Homepage
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  License
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Sponsorship
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Security
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Thanks
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Current Event
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/community/" class="nav-link">
  Community
</a></div><div class="nav-item"><a href="/download/" class="nav-link">
  Download
</a></div><div class="nav-item"><a href="/contributors/" class="nav-link">
  Contributors
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Documentation" class="dropdown-title"><span class="title">Documentation</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/" class="nav-link">
  Teaclave
</a></li><li class="dropdown-item"><!----> <a href="/sgx-sdk-docs/" class="nav-link">
  Teaclave SGX SDK
</a></li></ul></div></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  Blog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API Docs" class="dropdown-title"><span class="title">API Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/client-sdk-python/" target="_self" rel="" class="nav-link external">
  Teaclave Client SDK (Python)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/sgx-sdk/" target="_self" rel="" class="nav-link external">
  Teaclave SGX SDK
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/crates-enclave/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (Enclave)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/crates-app/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (App)
  <!----></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Repository" class="dropdown-title"><span class="title">Repository</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-sgx-sdk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave SGX SDK
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-website" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Apache Software Foundation" class="dropdown-title"><span class="title">ASF</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ASF Homepage
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  License
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Sponsorship
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Security
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Thanks
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Current Event
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <!----> </aside> <main class="page"> <div id="base-list-layout" class="theme-default-content"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        Mitigation of Intel-SA-00219 in Teaclave SGX SDK
      </h1> <div class="publish-date-author">December 2, 2019 · Yu Ding</div></header> <div itemprop="articleBody" class="content__default"><h2 id="background"><a href="#background" class="header-anchor">#</a> Background</h2> <p>Intel issued <a href="https://www.intel.com/content/www/us/en/security-center/advisory/intel-sa-00219.html" target="_blank" rel="noopener noreferrer">Intel SA-00219<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> on Nov 12, 2019, with CVE number <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-0117" target="_blank" rel="noopener noreferrer">CVE-2019-0117<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Intel also published a <a href="https://software.intel.com/en-us/download/intel-sgx-sdk-developer-guidance-intel-sa-00219" target="_blank" rel="noopener noreferrer">guidance<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to instruct the developers/researchers. Then Intel released <a href="https://01.org/intel-softwareguard-extensions/downloads/intel-sgx-linux-2.7.1-release-version-string-2.7.101.3" target="_blank" rel="noopener noreferrer">Intel SGX SDK v2.7.1<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, including new memory allocation primitives and corresponding patches in PSW enclaves.</p> <p>This article is to help people understand Intel-SA-00219, and how Teaclave SGX SDK handles it.</p> <h2 id="the-problem-statement-and-my-thoughts"><a href="#the-problem-statement-and-my-thoughts" class="header-anchor">#</a> The problem statement and my thoughts</h2> <p>The only statement I found is on the <a href="https://www.intel.com/content/www/us/en/security-center/advisory/intel-sa-00219.html" target="_blank" rel="noopener noreferrer">Intel-SA-00219 page<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <blockquote><p>Organize the code/data within enclave memory to avoid putting sensitive materials in DWORD0 and DWORD1 of cache line. The effectiveness of this mitigation is dependent on the ability for the software to avoid the affected memory region. To assist the enclave application providers to modify their code, Intel is releasing SGX SDK update (Windows version 2.5.101.3, Linux version 2.7.101.3) with new memory allocation APIs to avoid the affected memory region. More details about the APIs can be found <a href="https://software.intel.com/en-us/download/intel-sgx-sdk-developer-guidance-intel-sa-00219" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></blockquote> <p>Intel does not directly describe the vulnerability here. But it's clear that the 64-byte cache line would contain 8-byte or sensitive data, which can be keys protected by Intel SGX. So the following memory layout can be problematic in SGX:</p> <div class="language- extra-class"><pre class="language-text"><code> --------------------------------------------------------------------------------------
| attacker accessible data A | private key (inaccessible) | attacker accessible data B |
 --------------------------------------------------------------------------------------
</code></pre></div><p>It's equal to a vulnerable data structure like:</p> <div class="language- extra-class"><pre class="language-text"><code>struct foo {
    uint64_t A;
    uint64_t secret;
    uint64_t B;
}
</code></pre></div><p>where <code>foo.A</code> and <code>foo.B</code> are accessible by design, while <code>foo.secret</code> is not.</p> <p>If an attacker somehow can access either A or B, he probably will have first or last 8-byte of the &quot;inaccessible&quot; secret in cache line. Then something bad may happen.</p> <p>So, the most straightforward mitigation is to insert additional &quot;guard bytes&quot; before and after the sensitive data:</p> <div class="language- extra-class"><pre class="language-text"><code> ----------------------------------------------------------------------------------------------
| attacker data A | 8-byte guard | private key (inaccessible) | 8-byte guard | attacker data B |
 ----------------------------------------------------------------------------------------------
</code></pre></div><p>It results in a modified structure like</p> <div class="language- extra-class"><pre class="language-text"><code>struct foo {
    uint64_t A;
    (private) uint64_t _guard0;
    uint64_t secret;
    (private) uint64_t _guard1;
    uint64_t B;
}
</code></pre></div><p>Further investigation from Intel's code reveals that <code>_guard1</code> is not required. So it can be:</p> <div class="language- extra-class"><pre class="language-text"><code>     -------------------------------------------------------------------------------
    | attacker data A | 8-byte guard | private key (inaccessible) | attacker data B |
     -------------------------------------------------------------------------------
</code></pre></div><h2 id="intel-s-new-allocator-primitive"><a href="#intel-s-new-allocator-primitive" class="header-anchor">#</a> Intel's new allocator primitive</h2> <p>Intel's guidance provides:</p> <p>(1) A C++ template <code>custom_alignment_aligned</code>
(2) A C function <code>sgx_get_aligned_ptr</code> and one of its parameter's type <code>struct align_req_t</code>
(3) A dynamic memory allocator function <code>sgx_aligned_malloc</code></p> <p>After spending hours on Intel's code, I realized that these primitives are helping developers allocate a larger object which:</p> <p>a) contains all fields of the original object.
b) adds &quot;guard bytes&quot; before and after each &quot;specified secret field&quot;.
c) align each &quot;specified secret field&quot; on demand</p> <h2 id="intel-s-patches-on-psw-enclaves"><a href="#intel-s-patches-on-psw-enclaves" class="header-anchor">#</a> Intel's patches on PSW enclaves</h2> <p>The most easy to understand example is from <code>psw/ae/pse_op/session_mgr.cpp</code>:</p> <div class="language-diff extra-class"><pre class="language-diff"><code>@@ -417,7 +461,12 @@ pse_op_error_t pse_exchange_report(uint64_t tick,
<span class="token unchanged"> {
     pse_op_error_t status = OP_SUCCESS;
     sgx_dh_session_t sgx_dh_session;
</span><span class="token deleted-sign deleted">-    sgx_key_128bit_t aek;
</span><span class="token inserted-sign inserted">+    //
+    // securely align aek
+    //
+    //sgx_key_128bit_t aek;
+    sgx::custom_alignment_aligned&lt;sgx_key_128bit_t, sizeof(sgx_key_128bit_t), 0, sizeof(sgx_key_128bit_t)&gt; oaek;
+    sgx_key_128bit_t&amp; aek = oaek.v;
</span><span class="token unchanged">     sgx_dh_session_enclave_identity_t initiator_identity;
     cse_sec_prop_t * pcse_sec = NULL;
     secu_info_t* psec_info = NULL;
</span></code></pre></div><p>The template generates a larger struct <code>oaek</code>. Size of <code>sgx_key_128bit_t</code> is 16 bytes, and <code>sizeof(oaek)</code> equals to 32. And the offset of <code>oaek.v</code> is 8.</p> <p>And in the same file, another fix is:</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token coord">--- a/psw/ae/pse/pse_op/session_mgr.cpp</span>
<span class="token coord">+++ b/psw/ae/pse/pse_op/session_mgr.cpp</span>
<span class="token coord">@@ -29,21 +29,65 @@</span>
<span class="token unchanged">  *
  */
</span>
<span class="token deleted-sign deleted">-
</span><span class="token inserted-sign inserted">+#include &lt;sgx_secure_align.h&gt;
</span><span class="token unchanged"> #include &quot;utility.h&quot;
 #include &quot;session_mgr.h&quot;
 #include &quot;pse_op_t.h&quot;
 #include &quot;sgx_dh.h&quot;
</span>
<span class="token unchanged"> // ISV enclave &lt;-&gt; pse-op sessions
</span><span class="token deleted-sign deleted">-static pse_session_t        g_session[SESSION_CONNECTION];
</span><span class="token inserted-sign inserted">+//
+// securely align all ISV enclave - pse sessions' secrets
+//
+static sgx::custom_alignment_aligned&lt;pse_session_t, 16, __builtin_offsetof(pse_session_t, active.AEK), 16&gt; og_session[SESSION_CONNECTION];
+//
+// following allows existing references to g_session[index]
+// to not have to change
+//
+class CSessions
+{
+public:
+    pse_session_t&amp; operator[](int index) {
+        return og_session[index].v;
+    }
+};
+static CSessions g_session;
</span><span class="token unchanged"> static uint32_t             g_session_count = 0;
</span></code></pre></div><p>It seems that the original global <code>g_session</code> array is vulnerabile to INTEL-SA-00219. So Intel created a new structure <code>CSessions</code> and reloaded the <code>[]</code> operator, and used <code>custom_alignment_aligned</code> template to create the array of guarded <code>CSessions</code>.</p> <p>We can see some more complex samples in the same file, such as:</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"> // ephemeral session global variables
 static uint8_t              g_nonce_r_pse[EPH_SESSION_NONCE_SIZE] = {0};      // nonce R(PSE) for ephemeral session establishment
 static uint8_t              g_nonce_r_cse[EPH_SESSION_NONCE_SIZE] = {0};      // nonce R(CSE) for ephemeral session establishment
</span><span class="token deleted-sign deleted">-static pairing_data_t       g_pairing_data;                       // unsealed pairing data
-eph_session_t               g_eph_session;                        // ephemeral session information
</span><span class="token inserted-sign inserted">+
+//
+// securely align pairing data
+// Id_pse and Id_cse aren't secrets
+// I don't think pairingNonce is a secret and even if it is, we can't align
+// all of [mk, sk, pairingID, pairingNonce]
+//
+//static pairing_data_t       g_pairing_data;                       // unsealed pairing data
+static sgx::custom_alignment&lt;pairing_data_t,
+    //__builtin_offsetof(pairing_data_t, secret_data.Id_pse), sizeof(((pairing_data_t*)0)-&gt;secret_data.Id_pse),
+    //__builtin_offsetof(pairing_data_t, secret_data.Id_cse), sizeof(((pairing_data_t*)0)-&gt;secret_data.Id_cse),
+    __builtin_offsetof(pairing_data_t, secret_data.mk), sizeof(((pairing_data_t*)0)-&gt;secret_data.mk),
+    __builtin_offsetof(pairing_data_t, secret_data.sk), sizeof(((pairing_data_t*)0)-&gt;secret_data.sk),
+    __builtin_offsetof(pairing_data_t, secret_data.pairingID), sizeof(((pairing_data_t*)0)-&gt;secret_data.pairingID)
+    //__builtin_offsetof(pairing_data_t, secret_data.pairingNonce), sizeof(((pairing_data_t*)0)-&gt;secret_data.pairingNonce)
+    &gt; opairing_data;
+pairing_data_t&amp; g_pairing_data = opairing_data.v;
+//
+// securely align pse - cse/psda ephemeral session secrets
+//
+//eph_session_t               g_eph_session;                        // ephemeral session information
+sgx::custom_alignment&lt;eph_session_t,
+    __builtin_offsetof(eph_session_t, TSK), sizeof(((eph_session_t*)0)-&gt;TSK),
+    __builtin_offsetof(eph_session_t, TMK), sizeof(((eph_session_t*)0)-&gt;TMK)
+&gt; oeph_session;
+//
+// this reference trick requires change to declaration
+// in other files, but still cleaner than changing
+// all references
+//
+eph_session_t&amp; g_eph_session = oeph_session.v;
</span>
<span class="token unchanged"> /**
  * @brief Check the status of the ephemeral session
</span></code></pre></div><p>To understand it, let me expand <code>struct pairing_data_t</code> here:</p> <div class="language- extra-class"><pre class="language-text"><code>/* Pairing blob unsealed and usable inside of enclave*/
typedef struct _pairing_data_t
{
    se_plaintext_pairing_data_t plaintext; // does not involved
    struct se_secret_pairing_data_t {
            SHA256_HASH         Id_pse;
            SHA256_HASH         Id_cse;
            SIGMA_MAC_KEY       mk;
            SIGMA_SECRET_KEY    sk;
            SIGMA_SECRET_KEY    pairingID;  // old_sk used for repairing check
            Nonce128_t          pairingNonce;
            EcDsaPrivKey        VerifierPrivateKey;
    } secret_data;
} pairing_data_t;
</code></pre></div><p>The patch seems to protect <code>mk</code>, <code>sk</code>, and <code>pairingID</code>, and all the other fields are commented out. What's more, this patch uses a <strong>undocumented</strong> template <code>sgx::custom_alignment</code> defined as:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>    <span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> std<span class="token operator">::</span>size_t<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> OLs<span class="token operator">&gt;</span>
    <span class="token keyword">using</span> custom_alignment <span class="token operator">=</span> custom_alignment_aligned<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> <span class="token keyword">alignof</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">,</span> OLs<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="experiments-on-the-undocument-template"><a href="#experiments-on-the-undocument-template" class="header-anchor">#</a> Experiments on the undocument template</h2> <p>To test how the undocumented template work, I write the following codes:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>    <span class="token keyword">struct</span> <span class="token class-name">foo</span> <span class="token punctuation">{</span>
        <span class="token keyword">uint64_t</span> secret1<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>       <span class="token comment">// offset = 0</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> sgx<span class="token operator">::</span>custom_alignment<span class="token operator">&lt;</span>foo<span class="token punctuation">,</span> <span class="token function">__builtin_offsetof</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> secret1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>foo<span class="token operator">*</span><span class="token punctuation">)</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>secret1<span class="token punctuation">)</span><span class="token operator">&gt;</span> AFOO<span class="token punctuation">;</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;=== Size of foo = %u ===\n&quot;</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                               <span class="token comment">// 40</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;=== Size of bar = %u ===\n&quot;</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>AFOO<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                              <span class="token comment">// 64</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;=== offset of AROO.v = %u ===\n&quot;</span><span class="token punctuation">,</span> <span class="token function">__builtin_offsetof</span><span class="token punctuation">(</span>AFOO<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// 8</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;=== offset of secret1 = %u ===\n&quot;</span><span class="token punctuation">,</span> <span class="token function">__builtin_offsetof</span><span class="token punctuation">(</span>AFOO<span class="token punctuation">,</span> v<span class="token punctuation">.</span>secret1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 8</span>
</code></pre></div><p>So we can see that the structure of AROO is:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">struct</span> <span class="token class-name">AROO</span> <span class="token punctuation">{</span>
    <span class="token keyword">uint64_t</span> _padding_head<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>         <span class="token comment">// offset = 0, len = 8</span>
    <span class="token keyword">struct</span> <span class="token punctuation">{</span>
        <span class="token keyword">uint64_t</span> secret1<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>          <span class="token comment">// offset = 8, len = 40</span>
    <span class="token punctuation">}</span> v<span class="token punctuation">;</span>
    <span class="token keyword">uint64_t</span> _padding_tail<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment">// offset = 40, len = 16</span>
</code></pre></div><p>It seems the undocumented C++ template aligns <code>AROO</code> to the next level, and add 8-byte headings into it. If we add the second secret in <code>foo</code> like:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>    <span class="token keyword">struct</span> <span class="token class-name">foo</span> <span class="token punctuation">{</span>
        <span class="token keyword">uint64_t</span> secret1<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>       <span class="token comment">// offset = 0</span>
        <span class="token keyword">uint64_t</span> secret2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>       <span class="token comment">// offset = 40</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> sgx<span class="token operator">::</span>custom_alignment<span class="token operator">&lt;</span>foo<span class="token punctuation">,</span>
                <span class="token function">__builtin_offsetof</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> secret1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>foo<span class="token operator">*</span><span class="token punctuation">)</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>secret1<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">__builtin_offsetof</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> secret2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>foo<span class="token operator">*</span><span class="token punctuation">)</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>secret2<span class="token punctuation">)</span>
            <span class="token operator">&gt;</span> AFOO<span class="token punctuation">;</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;=== Size of foo = %u ===\n&quot;</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 48</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;=== Size of bar = %u ===\n&quot;</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>AFOO<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// 64</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;=== offset of AROO.v = %u ===\n&quot;</span><span class="token punctuation">,</span> <span class="token function">__builtin_offsetof</span><span class="token punctuation">(</span>AFOO<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// 8</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;=== offset of AROO.v.secret1 = %u ===\n&quot;</span><span class="token punctuation">,</span> <span class="token function">__builtin_offsetof</span><span class="token punctuation">(</span>AFOO<span class="token punctuation">,</span> v<span class="token punctuation">.</span>secret1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// 8</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;=== offset of AROO.v.secret2 = %u ===\n&quot;</span><span class="token punctuation">,</span> <span class="token function">__builtin_offsetof</span><span class="token punctuation">(</span>AFOO<span class="token punctuation">,</span> v<span class="token punctuation">.</span>secret2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// 48</span>
</code></pre></div><p>we can see that the structure of AROO is:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">struct</span> <span class="token class-name">AROO</span> <span class="token punctuation">{</span>
    <span class="token keyword">uint64_t</span> _padding_head<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>         <span class="token comment">// offset = 0, len = 8</span>
    <span class="token keyword">struct</span> <span class="token punctuation">{</span>
        <span class="token keyword">uint64_t</span> secret1<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>          <span class="token comment">// offset = 8, len = 40</span>
        <span class="token keyword">uint64_t</span> secret2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>          <span class="token comment">// offset = 48, len = 8</span>
    <span class="token punctuation">}</span> v<span class="token punctuation">;</span>
    <span class="token keyword">uint64_t</span> _padding_tail<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment">// offset = 56, len = 8</span>
</code></pre></div><p>If we increase <code>secret2</code> to 16-bytes, it works well as usual. And the <code>_padding_tail</code> will have <strong>zero length</strong>. So does it means that <em>only extra heading is required for mitigation</em>? But it'll not compile if we make <code>secret2</code> 24-bytes, like:</p> <div class="language-c++ extra-class"><pre class="language-text"><code>    struct foo {
        uint64_t secret1[5];       // offset = 0
        uint64_t secret2[3];       // offset = 40
    };

    typedef sgx::custom_alignment&lt;foo,
                __builtin_offsetof(foo, secret1), sizeof(((foo*)0)-&gt;secret1),
                __builtin_offsetof(foo, secret2), sizeof(((foo*)0)-&gt;secret2)
            &gt; AFOO;
</code></pre></div><p>GCC would terminate on:</p> <div class="language- extra-class"><pre class="language-text"><code>make[1]: Entering directory '/root/linux-sgx/SampleCode/Cxx11SGXDemo'
In file included from Enclave/TrustedLibrary/Libcxx.cpp:47:0:
/opt/sgxsdk/include/sgx_secure_align.h: In instantiation of 'struct sgx::__custom_alignment_internal::custom_alignment&lt;ecall_lambdas_demo()::foo, 8ul, -1&gt;':
Enclave/TrustedLibrary/Libcxx.cpp:125:53:   required from here
/opt/sgxsdk/include/sgx_secure_align.h:123:13: error: static assertion failed: No viable offset
             static_assert(LZ &gt; 0, &quot;No viable offset&quot;);
             ^
/opt/sgxsdk/include/sgx_secure_align.h:125:48: error: size of array is negative
             char __no_secret_allowed_in_here[LZ];
                                                ^
Makefile:255: recipe for target 'Enclave/TrustedLibrary/Libcxx.o' failed
</code></pre></div><p>Nothing changes if we switch to the original template <code>sgx::custom_alignment_aligned</code>. So I guess the template does not support structures:</p> <ul><li>contains secrets consecutively,  and</li> <li>the consecutive secrets' size is larger than a certain number (not sure yet)</li></ul> <p>If we break down <code>secret1</code> and <code>secret2</code> by inserting something in the middle, the template works:</p> <div class="language-c++ extra-class"><pre class="language-text"><code>struct foo {
  uint64_t secret1[5];       // offset = 0
  char     dumb;             // offset = 40
  uint64_t secret2[3];       // offset = 48
};

typedef sgx::custom_alignment&lt;foo,
__builtin_offsetof(foo, secret1), sizeof(((foo*)0)-&gt;secret1),
__builtin_offsetof(foo, secret2), sizeof(((foo*)0)-&gt;secret2)
  &gt; AFOO;

printf(&quot;=== Size of foo = %u ===\n&quot;, sizeof(foo));            // 72
printf(&quot;=== Size of bar = %u ===\n&quot;, sizeof(AFOO));           // 128
printf(&quot;=== offset of AROO.v = %u ===\n&quot;, __builtin_offsetof(AFOO, v));           // 24
printf(&quot;=== offset of AROO.v.secret1 = %u ===\n&quot;, __builtin_offsetof(AFOO, v.secret1));           // 24
printf(&quot;=== offset of AROO.v.secret2 = %u ===\n&quot;, __builtin_offsetof(AFOO, v.secret2));           // 72
</code></pre></div><h2 id="changes-actions-required"><a href="#changes-actions-required" class="header-anchor">#</a> Changes/Actions required</h2> <p>From Intel's usage, we can learn that:</p> <p>**Don't construct a sensitive data structure directly. Always allocate an aligned structure and fill it up later **</p> <p>It means:</p> <ul><li>if you allocate something sensitive (e.g. keys in <code>sgx_key_128bit_t</code>) on stack/heap, you probably need to allocate another guarded structure first, and get a mutable reference to its inner data.</li> <li>if you want to make <code>sgx_key_128bit_t</code> as the type of return value, you can choose between (1) return a guarded structure, or (2) takes an additional argument of caller-allocated, mutuable reference of <code>sgx_key_128bit_t</code> and fill it.</li></ul> <h2 id="rust-sgx-provided-primitive"><a href="#rust-sgx-provided-primitive" class="header-anchor">#</a> Rust SGX provided primitive</h2> <ul><li><p>We provided <code>AlignBox</code> as a replacement of <code>Box</code></p> <ul><li><p><code>Box</code> is somewhat tricky because it always &quot;initialize on stack first and copy to heap later&quot;. <a href="https://github.com/kvark/copyless" target="_blank" rel="noopener noreferrer">copyless<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> provides a novel primitive to solve <a href="https://github.com/dingelish/realbox" target="_blank" rel="noopener noreferrer">it but it does not always effective<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. To this end, we created <code>AlignBox</code> which guarantees &quot;on-heap initialization&quot; without copying any bits. Usage:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> heap_align_obj <span class="token operator">=</span> AlignBox<span class="token punctuation">::</span><span class="token operator">&lt;</span>struct_align_t<span class="token operator">&gt;</span><span class="token punctuation">::</span><span class="token function">heap_init_with_req</span><span class="token punctuation">(</span><span class="token operator">|</span><span class="token keyword">mut</span> t<span class="token operator">|</span> <span class="token punctuation">{</span>
  t<span class="token punctuation">.</span>key1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0xf0</span><span class="token punctuation">,</span> <span class="token number">0xf1</span><span class="token punctuation">,</span> <span class="token number">0xf2</span><span class="token punctuation">,</span> <span class="token number">0xf3</span><span class="token punctuation">,</span> <span class="token number">0xf4</span><span class="token punctuation">,</span> <span class="token number">0xf5</span><span class="token punctuation">,</span> <span class="token number">0xf6</span><span class="token punctuation">,</span> <span class="token number">0xf7</span><span class="token punctuation">,</span> <span class="token number">0xf8</span><span class="token punctuation">,</span> <span class="token number">0xf9</span><span class="token punctuation">,</span> <span class="token number">0xfa</span><span class="token punctuation">,</span> <span class="token number">0xfb</span><span class="token punctuation">,</span> <span class="token number">0xfc</span><span class="token punctuation">,</span> <span class="token number">0xfd</span><span class="token punctuation">,</span> <span class="token number">0xfe</span><span class="token punctuation">,</span> <span class="token number">0xff</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  t<span class="token punctuation">.</span>pad1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0x00</span><span class="token punctuation">;</span> <span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  t<span class="token punctuation">.</span>key2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0xf0</span><span class="token punctuation">,</span> <span class="token number">0xf1</span><span class="token punctuation">,</span> <span class="token number">0xf2</span><span class="token punctuation">,</span> <span class="token number">0xf3</span><span class="token punctuation">,</span> <span class="token number">0xf4</span><span class="token punctuation">,</span> <span class="token number">0xf5</span><span class="token punctuation">,</span> <span class="token number">0xf6</span><span class="token punctuation">,</span> <span class="token number">0xf7</span><span class="token punctuation">,</span> <span class="token number">0xf8</span><span class="token punctuation">,</span> <span class="token number">0xf9</span><span class="token punctuation">,</span> <span class="token number">0xfa</span><span class="token punctuation">,</span> <span class="token number">0xfb</span><span class="token punctuation">,</span> <span class="token number">0xfc</span><span class="token punctuation">,</span> <span class="token number">0xfd</span><span class="token punctuation">,</span> <span class="token number">0xfe</span><span class="token punctuation">,</span> <span class="token number">0xff</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  t<span class="token punctuation">.</span>pad2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0x00</span><span class="token punctuation">;</span> <span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  t<span class="token punctuation">.</span>key3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0xf0</span><span class="token punctuation">,</span> <span class="token number">0xf1</span><span class="token punctuation">,</span> <span class="token number">0xf2</span><span class="token punctuation">,</span> <span class="token number">0xf3</span><span class="token punctuation">,</span> <span class="token number">0xf4</span><span class="token punctuation">,</span> <span class="token number">0xf5</span><span class="token punctuation">,</span> <span class="token number">0xf6</span><span class="token punctuation">,</span> <span class="token number">0xf7</span><span class="token punctuation">,</span> <span class="token number">0xf8</span><span class="token punctuation">,</span> <span class="token number">0xf9</span><span class="token punctuation">,</span> <span class="token number">0xfa</span><span class="token punctuation">,</span> <span class="token number">0xfb</span><span class="token punctuation">,</span> <span class="token number">0xfc</span><span class="token punctuation">,</span> <span class="token number">0xfd</span><span class="token punctuation">,</span> <span class="token number">0xfe</span><span class="token punctuation">,</span> <span class="token number">0xff</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  t<span class="token punctuation">.</span>pad3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0x00</span><span class="token punctuation">;</span> <span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  t<span class="token punctuation">.</span>key4 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0xf0</span><span class="token punctuation">,</span> <span class="token number">0xf1</span><span class="token punctuation">,</span> <span class="token number">0xf2</span><span class="token punctuation">,</span> <span class="token number">0xf3</span><span class="token punctuation">,</span> <span class="token number">0xf4</span><span class="token punctuation">,</span> <span class="token number">0xf5</span><span class="token punctuation">,</span> <span class="token number">0xf6</span><span class="token punctuation">,</span> <span class="token number">0xf7</span><span class="token punctuation">,</span> <span class="token number">0xf8</span><span class="token punctuation">,</span> <span class="token number">0xf9</span><span class="token punctuation">,</span> <span class="token number">0xfa</span><span class="token punctuation">,</span> <span class="token number">0xfb</span><span class="token punctuation">,</span> <span class="token number">0xfc</span><span class="token punctuation">,</span> <span class="token number">0xfd</span><span class="token punctuation">,</span> <span class="token number">0xfe</span><span class="token punctuation">,</span> <span class="token number">0xff</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>str_slice<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">assert!</span><span class="token punctuation">(</span>heap_align_obj<span class="token punctuation">.</span><span class="token function">is_some</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul></li> <li><p>We provided aligned key type for each built-in key type. The layout are calculated by Intel's template.</p> <ul><li><code>sgx_align_key_128bit_t</code></li> <li><code>sgx_align_mac_128bit_t</code></li> <li><code>sgx_align_key_256bit_t</code></li> <li><code>sgx_align_mac_256bit_t</code></li> <li><code>sgx_align_ec256_dh_shared_t</code></li> <li><code>sgx_align_ec256_private_t</code></li></ul></li></ul> <p>We modified <code>sgx_tcrypto</code>, <code>sgx_tse</code>, and <code>sgx_tdh</code> and use the above primitives for enhancement, following the above required changes. One sample is from <code>sgx_tcrypto</code>:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token operator">+</span>    <span class="token keyword">let</span> <span class="token keyword">mut</span> align_mac <span class="token operator">=</span> sgx_align_mac_128bit_t<span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span>    <span class="token keyword">let</span> ret <span class="token operator">=</span> <span class="token keyword">unsafe</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>        <span class="token function">sgx_rijndael128_cmac_msg</span><span class="token punctuation">(</span>key <span class="token keyword">as</span> <span class="token operator">*</span> <span class="token keyword">const</span> sgx_cmac_128bit_key_t<span class="token punctuation">,</span>
<span class="token operator">+</span>                                 src<span class="token punctuation">.</span><span class="token function">as_ptr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token operator">*</span> <span class="token keyword">const</span> u8<span class="token punctuation">,</span>
<span class="token operator">+</span>                                 size <span class="token keyword">as</span> u32<span class="token punctuation">,</span>
<span class="token operator">+</span>                                 <span class="token operator">&amp;</span><span class="token keyword">mut</span> align_mac<span class="token punctuation">.</span>mac <span class="token keyword">as</span> <span class="token operator">*</span> <span class="token keyword">mut</span> sgx_cmac_128bit_tag_t<span class="token punctuation">)</span>
<span class="token operator">+</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>We allocate an aligned structure first, and then fill it up using Intel's crypto primitive later.</p></div></article></div>  <div class="footer">
    Apache Teaclave (incubating) is an effort undergoing incubation at The Apache
    Software Foundation (ASF), sponsored by the Apache Incubator.
    Incubation is required of all newly accepted projects until a further review
    indicates that the infrastructure, communications, and decision making process
    have stabilized in a manner consistent with other successful ASF projects. While
    incubation status is not necessarily a reflection of the completeness or
    stability of the code, it does indicate that the project has yet to be fully
    endorsed by the ASF.
    Copyright © 2020 The Apache Software Foundation.
    Licensed under the Apache License, Version 2.0.
    Apache Teaclave, Apache, the Apache feather, and the Apache Teaclave project logo are either
    trademarks or registered trademarks of the Apache Software Foundation.
  </div></main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.25e473b1.js" defer></script><script src="/assets/js/9.363f0c58.js" defer></script><script src="/assets/js/1.dfc25e73.js" defer></script><script src="/assets/js/15.4dbaec29.js" defer></script>
  </body>
</html>
