<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Teaclave Service Internals | Apache Teaclave (Incubating)</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="Apache Teaclave (incubating) is an open source universal secure computing platform, making computation on privacy-sensitive data safe and simple.">
    <meta property="article:modified_time" content="2020-07-10T18:56:53.000Z">
    <meta property="og:site_name" content="Apache Teaclave (Incubating)">
    <meta property="og:title" content="Teaclave Service Internals">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://teaclave.apache.org/docs/service-internals/">
    <meta name="twitter:title" content="Teaclave Service Internals">
    <meta name="twitter:url" content="https://teaclave.apache.org/docs/service-internals/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@ApacheTeaclave">
    <link rel="preload" href="/assets/css/0.styles.f7f6a4c9.css" as="style"><link rel="preload" href="/assets/js/app.392be20c.js" as="script"><link rel="preload" href="/assets/js/5.bd79a977.js" as="script"><link rel="preload" href="/assets/js/1.bd8d225e.js" as="script"><link rel="preload" href="/assets/js/43.43c24108.js" as="script"><link rel="prefetch" href="/assets/js/10.44d9840a.js"><link rel="prefetch" href="/assets/js/11.dbe339ef.js"><link rel="prefetch" href="/assets/js/12.780ced98.js"><link rel="prefetch" href="/assets/js/13.eabf2e35.js"><link rel="prefetch" href="/assets/js/14.0fdba089.js"><link rel="prefetch" href="/assets/js/15.c066a662.js"><link rel="prefetch" href="/assets/js/16.7255d4dd.js"><link rel="prefetch" href="/assets/js/17.188e2335.js"><link rel="prefetch" href="/assets/js/18.7175283f.js"><link rel="prefetch" href="/assets/js/19.efbe3365.js"><link rel="prefetch" href="/assets/js/2.e7c9869f.js"><link rel="prefetch" href="/assets/js/20.ba5f7881.js"><link rel="prefetch" href="/assets/js/21.638370ff.js"><link rel="prefetch" href="/assets/js/22.3ee0d540.js"><link rel="prefetch" href="/assets/js/23.572d5ba2.js"><link rel="prefetch" href="/assets/js/24.b7bc8249.js"><link rel="prefetch" href="/assets/js/25.0a7955df.js"><link rel="prefetch" href="/assets/js/26.54f3ff04.js"><link rel="prefetch" href="/assets/js/27.a10cfe94.js"><link rel="prefetch" href="/assets/js/28.84096bd4.js"><link rel="prefetch" href="/assets/js/29.81f06289.js"><link rel="prefetch" href="/assets/js/30.6467e09b.js"><link rel="prefetch" href="/assets/js/31.4d0a74c0.js"><link rel="prefetch" href="/assets/js/32.14bf122c.js"><link rel="prefetch" href="/assets/js/33.f1bb0489.js"><link rel="prefetch" href="/assets/js/34.26d4cba6.js"><link rel="prefetch" href="/assets/js/35.2f95d830.js"><link rel="prefetch" href="/assets/js/36.9b1f194b.js"><link rel="prefetch" href="/assets/js/37.4603e885.js"><link rel="prefetch" href="/assets/js/38.539c60b7.js"><link rel="prefetch" href="/assets/js/39.17d17abe.js"><link rel="prefetch" href="/assets/js/40.c1861500.js"><link rel="prefetch" href="/assets/js/41.aa8c17e8.js"><link rel="prefetch" href="/assets/js/42.fa4b161c.js"><link rel="prefetch" href="/assets/js/44.f2acb126.js"><link rel="prefetch" href="/assets/js/45.5586b1cf.js"><link rel="prefetch" href="/assets/js/46.3305e49e.js"><link rel="prefetch" href="/assets/js/47.9542a725.js"><link rel="prefetch" href="/assets/js/48.963d946d.js"><link rel="prefetch" href="/assets/js/49.012cfe5d.js"><link rel="prefetch" href="/assets/js/50.da4bbc4e.js"><link rel="prefetch" href="/assets/js/51.b3d9c02f.js"><link rel="prefetch" href="/assets/js/52.1b31e0b5.js"><link rel="prefetch" href="/assets/js/53.c4fdb5e7.js"><link rel="prefetch" href="/assets/js/54.f7740483.js"><link rel="prefetch" href="/assets/js/55.7b0c736c.js"><link rel="prefetch" href="/assets/js/56.0d2dc1c2.js"><link rel="prefetch" href="/assets/js/57.98a0d2c3.js"><link rel="prefetch" href="/assets/js/58.56d10b71.js"><link rel="prefetch" href="/assets/js/6.84f5aa4a.js"><link rel="prefetch" href="/assets/js/7.439c948a.js"><link rel="prefetch" href="/assets/js/8.a136c641.js"><link rel="prefetch" href="/assets/js/9.825606df.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.046c7832.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f7f6a4c9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Apache Teaclave (Incubating)</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/community/" class="nav-link">
  Community
</a></div><div class="nav-item"><a href="/download/" class="nav-link">
  Download
</a></div><div class="nav-item"><a href="/contributors/" class="nav-link">
  Contributors
</a></div><div class="nav-item"><a href="/docs/" class="nav-link router-link-active">
  Documentation
</a></div><div class="nav-item"><a href="/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API Docs" class="dropdown-title"><span class="title">API Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/docs/client-sdk-python/" target="_self" rel="" class="nav-link external">
  Teaclave Client SDK (Python)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/docs/sgx-sdk/" target="_self" rel="" class="nav-link external">
  Teaclave SGX SDK
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/docs/crates-enclave/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (Enclave)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/docs/crates-app/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (App)
  <!----></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Repository" class="dropdown-title"><span class="title">Repository</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-sgx-sdk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave SGX SDK
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-website" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Apache Software Foundation" class="dropdown-title"><span class="title">ASF</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ASF Homepage
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  License
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Sponsorship
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Security
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Thanks
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Current Event
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/community/" class="nav-link">
  Community
</a></div><div class="nav-item"><a href="/download/" class="nav-link">
  Download
</a></div><div class="nav-item"><a href="/contributors/" class="nav-link">
  Contributors
</a></div><div class="nav-item"><a href="/docs/" class="nav-link router-link-active">
  Documentation
</a></div><div class="nav-item"><a href="/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API Docs" class="dropdown-title"><span class="title">API Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/docs/client-sdk-python/" target="_self" rel="" class="nav-link external">
  Teaclave Client SDK (Python)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/docs/sgx-sdk/" target="_self" rel="" class="nav-link external">
  Teaclave SGX SDK
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/docs/crates-enclave/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (Enclave)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/docs/crates-app/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (App)
  <!----></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Repository" class="dropdown-title"><span class="title">Repository</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-sgx-sdk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave SGX SDK
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-website" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Apache Software Foundation" class="dropdown-title"><span class="title">ASF</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ASF Homepage
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  License
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Sponsorship
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Security
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Thanks
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Current Event
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Try</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/my-first-function/" class="sidebar-link">My First Function</a></li><li><a href="/docs/functions-in-python/" class="sidebar-link">Write Functions in Python</a></li><li><a href="/docs/builtin-functions/" class="sidebar-link">How to Add Built-in Functions</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Design</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/threat-model/" class="sidebar-link">Threat Model</a></li><li><a href="/docs/mutual-attestation/" class="sidebar-link">Mutual Attestation: Why and How</a></li><li><a href="/docs/access-control/" class="sidebar-link">Access Control in Teaclave</a></li><li><a href="/docs/build-system/" class="sidebar-link">Build System</a></li><li><a href="/docs/service-internals/" class="active sidebar-link">Teaclave Service Internals</a></li><li><a href="/docs/papers-talks/" class="sidebar-link">Papers, Talks, and Related Articles</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Contribute</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/development-tips/" class="sidebar-link">Development Tips</a></li><li><a href="/docs/rust-guildeline/" class="sidebar-link">Rust Development Guideline</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Codebase</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/codebase/attestation/" class="sidebar-link">Attestation in Teaclave</a></li><li><a href="/teaclave/binder/" class="sidebar-link">Binder</a></li><li><a href="/docs/codebase/cli/" class="sidebar-link">Teaclave Command Line Tool</a></li><li><a href="/docs/codebase/common/" class="sidebar-link">Common Libraries</a></li><li><a href="/docs/codebase/config/" class="sidebar-link">Configurations in Teaclave</a></li><li><a href="/teaclave/crypto/" class="sidebar-link">Crypto Primitives</a></li><li><a href="/docs/codebase/dcap/" class="sidebar-link">Data Center Attestation Service</a></li><li><a href="/docs/codebase/docker/" class="sidebar-link">Teaclave Docker</a></li><li><a href="/docs/codebase/examples/" class="sidebar-link">Examples</a></li><li><a href="/docs/codebase/executor/" class="sidebar-link">Function Executors</a></li><li><a href="/docs/codebase/file-agent/" class="sidebar-link">File Agent</a></li><li><a href="/docs/codebase/function/" class="sidebar-link">Built-in Functions</a></li><li><a href="/docs/codebase/keys/" class="sidebar-link">Keys and Certificates in Teaclave</a></li><li><a href="/docs/codebase/rpc/" class="sidebar-link">RPC</a></li><li><a href="/docs/codebase/runtime/" class="sidebar-link">Executor Runtime</a></li><li><a href="/docs/codebase/sdk/" class="sidebar-link">Client SDK</a></li><li><a href="/docs/codebase/services/" class="sidebar-link">Teaclave Services</a></li><li><a href="/docs/codebase/tests/" class="sidebar-link">Test Harness and Test Cases</a></li><li><a href="/docs/codebase/third-party/" class="sidebar-link">Third-Party Dependency Vendoring</a></li><li><a href="/docs/codebase/tool/" class="sidebar-link">Teaclave SGX Tool</a></li><li><a href="/docs/codebase/types/" class="sidebar-link">Types</a></li><li><a href="/docs/codebase/worker/" class="sidebar-link">Teaclave Worker</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="teaclave-service-internals"><a href="#teaclave-service-internals" class="header-anchor">#</a> Teaclave Service Internals</h1> <p>Teaclave Service is one of the most important abstractions in the platform.
Basically, the Teaclave FaaS platform is the combination of different functional
services and connected through trusted channels. The Teaclave services include
authentication service, frontend service, management service, storage service,
access control service, scheduler service, and execution service. They play
different roles in the system.</p> <p>To understand the design and internal implementation of these services, we need
to discuss in these sections: RPC and protocol, app-enclave structure, and
the attestation mechanism.</p> <h2 id="rpc-and-protocols"><a href="#rpc-and-protocols" class="header-anchor">#</a> RPC and Protocols</h2> <p>We use Protocol Buffers (version 3) to define messages and RPC interfaces of the
Teaclave services. For example, the authentication service has this definition.</p> <div class="language-proto extra-class"><pre class="language-text"><code>message UserLoginRequest {
  string id = 1;
  string password = 2;
}

message UserLoginResponse {
  string token = 1;
}

service TeaclaveAuthenticationApi {
  rpc UserLogin (UserLoginRequest) returns (UserLoginResponse);
}
</code></pre></div><p>This means that the authentication service (for the API endpoint) has an RPC
interface called &quot;<code>UserLogin</code>&quot;, which takes a &quot;<code>UserLoginRequest</code>&quot; message with
<code>id</code> and <code>password</code> inside (in string type) and reply a &quot;<code>UserLoginResponse</code>&quot;
message with <code>token</code> inside (in string type).</p> <p>With this definition, the build system will help to generate utility functions,
traits, and structures for clients to send RPC requests, and for service to
implement functions of handling requests. This is done by a build time tool
called <a href="https://github.com/apache/incubator-teaclave/tree/master/services/proto/proto_gen" target="_blank" rel="noopener noreferrer"><code>proto_gen</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>There is another layer in the <code>teaclave_proto</code> crate to help convert protobuf's
simple data type to Rust's more concise data type. For example, a URL is defined
in the string type in protobuf, while in Rust we can use the <code>Url</code> struct to
store a URL.</p> <p>For more protocol definitions for other services, please see proto files in
the <a href="https://github.com/apache/incubator-teaclave/tree/master/services/proto/src/proto" target="_blank" rel="noopener noreferrer"><code>proto</code> directory<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="service-implementation-structure"><a href="#service-implementation-structure" class="header-anchor">#</a> Service Implementation Structure</h2> <p>A service in Teaclave consists of two parts: the app (untrusted) part and the
enclave (trusted) part. The app part is responsible for managing the service,
launching and terminating the enclave part, while the enclave part is to serve
RPC requests from clients (or other services) through trusted channels, execute
logic, and process data in the trusted execution environment.</p> <h3 id="app-untrusted"><a href="#app-untrusted" class="header-anchor">#</a> App (Untrusted)</h3> <p>Basically, the app part of a service does the followings:</p> <ul><li>Load the runtime configuration from the config file.</li> <li>Create a service launcher: prepare the binder and set the serialized config as
an input.</li> <li>Start the service enclave (<em>ecall</em> to the trusted enclave part).</li> <li>Misc: register signal handlers so that the app/enclave can respond to some
signals.</li></ul> <h3 id="enclave-trusted"><a href="#enclave-trusted" class="header-anchor">#</a> Enclave (Trusted)</h3> <p>Typically, a service's implementation in the enclave part contains two important
structs and one trait. Let's take the frontend service as an example.</p> <ul><li><code>TeaclaveFrontendService</code> (struct): Define properties or configurations along
with the lifetime of the service. For example, the frontend service needs to
hold clients (with established trusted channels) to communicate with the
authentication service and management service.</li> <li><code>TeaclaveFrontendError</code> (struct): Define errors that may occur in this
service, authentication error, for example.
<ul><li><code>TeaclaveFrontend</code> (trait Define): functions (requests) the service needs to
handle. The trait will be automatically derived from definitions in the
ProtoBuf file and can be imported from the <code>teaclave_proto</code> crate.</li></ul></li></ul> <p>You will see some <code>#[handle_ecall]</code> annotations on functions and the
<code>register_ecall_handler</code> macro to help with the function registration.
The lifecycle of a Teaclave service consists of enclave initialized, service
started, and enclave finalized, which will invoke the corresponding command
handlers - <code>InitEnclave</code>, <code>StartService</code>, and <code>FinalizeEnclave</code>.</p> <p>The start service function is the entry point of an enclave service. Here are
steps to prepare and start serving requests.</p> <ul><li>Initialize the attestation config and make a remote attestation.</li> <li>With the endorsed attestation report, initialize an attested TLS config.</li> <li>Initialize a TLS server with TLS config and listening address.</li> <li>If needed, initialize service endpoints this service wants to connect. For
example, the frontend service needs to connect to the authentication service
and management service.</li> <li>Start the service (with endpoint handlers) and begin to serve requests.</li></ul> <p>Here is a code snippet from authentication service in the enclave part:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> api_listen_address <span class="token operator">=</span> config<span class="token punctuation">.</span>api_endpoints<span class="token punctuation">.</span>authentication<span class="token punctuation">.</span>listen_address<span class="token punctuation">;</span>
<span class="token keyword">let</span> attestation_config <span class="token operator">=</span> AttestationConfig<span class="token punctuation">::</span><span class="token function">from_teaclave_config</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>config<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> attested_tls_config <span class="token operator">=</span> RemoteAttestation<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>attestation_config<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">generate_and_endorse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span>
    <span class="token punctuation">.</span><span class="token function">attested_tls_config</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">ok_or_else</span><span class="token punctuation">(</span><span class="token operator">||</span> <span class="token function">anyhow!</span><span class="token punctuation">(</span><span class="token string">&quot;cannot get attested TLS config&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> server_config <span class="token operator">=</span> SgxTrustedTlsServerConfig<span class="token punctuation">::</span><span class="token function">from_attested_tls_config</span><span class="token punctuation">(</span>attested_tls_config<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token keyword">mut</span> server <span class="token operator">=</span> SgxTrustedTlsServer<span class="token punctuation">::</span><span class="token operator">&lt;</span>
    TeaclaveAuthenticationApiResponse<span class="token punctuation">,</span>
    TeaclaveAuthenticationApiRequest<span class="token punctuation">,</span>
<span class="token operator">&gt;</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>addr<span class="token punctuation">,</span> server_config<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> service <span class="token operator">=</span> api_service<span class="token punctuation">::</span>TeaclaveAuthenticationApiService<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>db_client<span class="token punctuation">,</span> jwt_secret<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">match</span> server<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span>service<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h2 id="topology"><a href="#topology" class="header-anchor">#</a> Topology</h2> <p>These services are communicating through RPC with remote attestation. Here is a
topological graph illustrating connections between services.</p> <div class="language- extra-class"><pre class="language-text"><code>clients =&gt; authentication &lt;-+       +----&gt; storage &lt;----+
                            |       |                   |
clients =&gt; frontend ----------&gt; management            scheduler &lt;-- execution
                                    |
                                    +--&gt; access_control


                                                  =&gt;      api endpoint connections
                                                  -&gt; internal endpoint connections
</code></pre></div><h2 id="attestation-in-services"><a href="#attestation-in-services" class="header-anchor">#</a> Attestation in Services</h2> <p>To explain the usages of remote attestation mechanism in services, we need to
consider two different scenarios: 1) the service wants to serve RPC requests
from clients, 2) the service wants to connect and send requests to other
services.</p> <p>For the first scenario, the endorsed attestation report is used for creating the
trusted TLS server, so that clients can attest the service's report to verify
the platform. In the meantime, if the service wants to attest clients (a.k.a.,
establishing mutual attestation), we need to get the accepted enclave attributes
from the <em>enclave info</em> first to create the trusted TLS server. By this, the
server can also attest clients' attestation reports and only accept expected
connections.</p> <p>You may find code like the following to get the accepted enclave attributes for
mutual attestation:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> enclave_info <span class="token operator">=</span> EnclaveInfo<span class="token punctuation">::</span><span class="token function">verify_and_new</span><span class="token punctuation">(</span><span class="token punctuation">...</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> accepted_enclave_attrs<span class="token punctuation">:</span> Vec<span class="token operator">&lt;</span>teaclave_types<span class="token punctuation">::</span>EnclaveAttr<span class="token operator">&gt;</span> <span class="token operator">=</span> AUTHENTICATION_INBOUND_SERVICES
    <span class="token punctuation">.</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token operator">|</span>service<span class="token operator">|</span> <span class="token keyword">match</span> enclave_info<span class="token punctuation">.</span><span class="token function">get_enclave_attr</span><span class="token punctuation">(</span>service<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>collect<span class="token punctuation">::</span><span class="token operator">&lt;</span>Result<span class="token operator">&lt;</span>_<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>

<span class="token punctuation">...</span>

<span class="token keyword">let</span> server_config <span class="token operator">=</span> SgxTrustedTlsServerConfig<span class="token punctuation">::</span><span class="token function">from_attested_tls_config</span><span class="token punctuation">(</span>attested_tls_config<span class="token punctuation">)</span><span class="token operator">?</span>
    <span class="token punctuation">.</span><span class="token function">attestation_report_verifier</span><span class="token punctuation">(</span>
    accepted_enclave_attrs<span class="token punctuation">,</span>
    AS_ROOT_CA_CERT<span class="token punctuation">,</span>
    verifier<span class="token punctuation">::</span>universal_quote_verifier<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
</code></pre></div><p>For the second scenario, the report is used to create a trusted TLS channel so
that the client can present its report when establishing the channel. Also, the
server's report will be verified.</p> <h2 id="customize-a-standalone-service"><a href="#customize-a-standalone-service" class="header-anchor">#</a> Customize a Standalone Service</h2> <p>For most cases, we suggest using the Teaclave platform as a whole for security
and functionality concerns. However, you may want to customize a TEE service
using Teaclave's existing capabilities under our service framework. For
instance, the execution service can be used as a standalone TEE Python executor,
and the storage service can be used as a secure database as well.</p> <p>To customize Teaclave services as a standalone one, you need to first think
about the interfaces exposed to clients, that is the definitions in protobuf.
For example, for a key-value database, we have defined <code>Get</code>, <code>Put</code> and <code>Delete</code>
interfaces.</p> <p>Additionally, if you are using it as a standalone TEE service, the attestation
mechanism needs to be &quot;one-way attestation&quot; accordingly. That is, only clients
can establish trusted channels and attest the service's identity and platform
status, but service cannot attest clients.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/10/2020, 11:56:53 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/build-system/" class="prev">
        Build System
      </a></span> <span class="next"><a href="/docs/papers-talks/">
        Papers, Talks, and Related Articles
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.392be20c.js" defer></script><script src="/assets/js/5.bd79a977.js" defer></script><script src="/assets/js/1.bd8d225e.js" defer></script><script src="/assets/js/43.43c24108.js" defer></script>
  </body>
</html>
