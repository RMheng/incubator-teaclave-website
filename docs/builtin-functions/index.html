<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>How to Add Built-in Functions | Apache Teaclave (incubating)</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Cutive+Mono|Roboto:100,300,400,500,700,900|Roboto+Condensed:300,400|Noto+Sans+SC:400,500,700,900">
    <script src="https://use.fontawesome.com/releases/v5.15.0/js/all.js"></script>
    <link rel="alternate" type="application/rss+xml" href="https://teaclave.apache.org/rss.xml" title="Apache Teaclave (incubating) RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="https://teaclave.apache.org/feed.atom" title="Apache Teaclave (incubating) Atom Feed">
    <link rel="alternate" type="application/json" href="https://teaclave.apache.org/feed.json" title="Apache Teaclave (incubating) JSON Feed">
    <meta name="description" content="Apache Teaclave (incubating) is an open source universal secure computing platform, making computation on privacy-sensitive data safe and simple.">
    <meta property="article:modified_time" content="2020-06-19T22:13:12.000Z">
    <meta property="og:site_name" content="Apache Teaclave (incubating)">
    <meta property="og:title" content="How to Add Built-in Functions">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://teaclave.apache.org/docs/builtin-functions/">
    <meta name="twitter:title" content="How to Add Built-in Functions">
    <meta name="twitter:url" content="https://teaclave.apache.org/docs/builtin-functions/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@ApacheTeaclave">
    
    <link rel="preload" href="/assets/css/0.styles.5b7e851c.css" as="style"><link rel="preload" href="/assets/js/app.674f1404.js" as="script"><link rel="preload" href="/assets/js/25.ce874af4.js" as="script"><link rel="preload" href="/assets/js/1.47a17018.js" as="script"><link rel="preload" href="/assets/js/124.393a4a3e.js" as="script"><link rel="prefetch" href="/assets/js/10.e83e8876.js"><link rel="prefetch" href="/assets/js/100.fa2be462.js"><link rel="prefetch" href="/assets/js/101.714c3789.js"><link rel="prefetch" href="/assets/js/102.c7530e5a.js"><link rel="prefetch" href="/assets/js/103.5081d72d.js"><link rel="prefetch" href="/assets/js/104.e2dff1d2.js"><link rel="prefetch" href="/assets/js/105.54058564.js"><link rel="prefetch" href="/assets/js/106.d0ad9e36.js"><link rel="prefetch" href="/assets/js/107.271e0ac0.js"><link rel="prefetch" href="/assets/js/108.c10c5a49.js"><link rel="prefetch" href="/assets/js/109.887de498.js"><link rel="prefetch" href="/assets/js/11.307e2c64.js"><link rel="prefetch" href="/assets/js/110.9fced9f0.js"><link rel="prefetch" href="/assets/js/111.7fdb519c.js"><link rel="prefetch" href="/assets/js/112.58505784.js"><link rel="prefetch" href="/assets/js/113.08778138.js"><link rel="prefetch" href="/assets/js/114.8276f7d5.js"><link rel="prefetch" href="/assets/js/115.a2cbb464.js"><link rel="prefetch" href="/assets/js/116.87eec8bb.js"><link rel="prefetch" href="/assets/js/117.b99dc8f7.js"><link rel="prefetch" href="/assets/js/118.75d77cc7.js"><link rel="prefetch" href="/assets/js/119.d0f0caf1.js"><link rel="prefetch" href="/assets/js/12.14e9076b.js"><link rel="prefetch" href="/assets/js/120.a40cb270.js"><link rel="prefetch" href="/assets/js/121.49033a40.js"><link rel="prefetch" href="/assets/js/122.2849c639.js"><link rel="prefetch" href="/assets/js/123.3bc1b5c8.js"><link rel="prefetch" href="/assets/js/125.56dca19d.js"><link rel="prefetch" href="/assets/js/126.93afe88a.js"><link rel="prefetch" href="/assets/js/127.aab1f04e.js"><link rel="prefetch" href="/assets/js/128.13b51cda.js"><link rel="prefetch" href="/assets/js/129.010601d2.js"><link rel="prefetch" href="/assets/js/13.db9ebf5b.js"><link rel="prefetch" href="/assets/js/130.3f42cd47.js"><link rel="prefetch" href="/assets/js/131.a4f32dcb.js"><link rel="prefetch" href="/assets/js/132.77e3cc49.js"><link rel="prefetch" href="/assets/js/133.adbfe47b.js"><link rel="prefetch" href="/assets/js/134.dc19c472.js"><link rel="prefetch" href="/assets/js/135.429b667b.js"><link rel="prefetch" href="/assets/js/136.ed347242.js"><link rel="prefetch" href="/assets/js/137.b8247010.js"><link rel="prefetch" href="/assets/js/138.bd4ff718.js"><link rel="prefetch" href="/assets/js/139.999c90e8.js"><link rel="prefetch" href="/assets/js/14.e64cd22f.js"><link rel="prefetch" href="/assets/js/140.f13f169c.js"><link rel="prefetch" href="/assets/js/141.0b175ef4.js"><link rel="prefetch" href="/assets/js/142.572d747b.js"><link rel="prefetch" href="/assets/js/143.8aef5603.js"><link rel="prefetch" href="/assets/js/144.db0780d7.js"><link rel="prefetch" href="/assets/js/145.8a147b06.js"><link rel="prefetch" href="/assets/js/146.a6113e0d.js"><link rel="prefetch" href="/assets/js/147.5d60bcf0.js"><link rel="prefetch" href="/assets/js/148.00ed25bf.js"><link rel="prefetch" href="/assets/js/149.6924fb57.js"><link rel="prefetch" href="/assets/js/15.0c44d45b.js"><link rel="prefetch" href="/assets/js/16.13d91fa2.js"><link rel="prefetch" href="/assets/js/17.5c16b361.js"><link rel="prefetch" href="/assets/js/18.5fb1dcc3.js"><link rel="prefetch" href="/assets/js/19.f21a827f.js"><link rel="prefetch" href="/assets/js/2.685d5955.js"><link rel="prefetch" href="/assets/js/20.3e8c1a33.js"><link rel="prefetch" href="/assets/js/21.f276b9f5.js"><link rel="prefetch" href="/assets/js/22.3300e6e5.js"><link rel="prefetch" href="/assets/js/23.682bc379.js"><link rel="prefetch" href="/assets/js/24.b08e8a28.js"><link rel="prefetch" href="/assets/js/26.9e30d543.js"><link rel="prefetch" href="/assets/js/27.f2749b1c.js"><link rel="prefetch" href="/assets/js/28.68a4a8f3.js"><link rel="prefetch" href="/assets/js/29.05423515.js"><link rel="prefetch" href="/assets/js/30.3312830c.js"><link rel="prefetch" href="/assets/js/31.a6c54b93.js"><link rel="prefetch" href="/assets/js/32.3aa9c544.js"><link rel="prefetch" href="/assets/js/33.d0cc4332.js"><link rel="prefetch" href="/assets/js/34.00b5a346.js"><link rel="prefetch" href="/assets/js/35.9d8ac12d.js"><link rel="prefetch" href="/assets/js/36.173103ae.js"><link rel="prefetch" href="/assets/js/37.39e3cd97.js"><link rel="prefetch" href="/assets/js/38.87db2f9c.js"><link rel="prefetch" href="/assets/js/39.a91cbaa9.js"><link rel="prefetch" href="/assets/js/40.2d571bfe.js"><link rel="prefetch" href="/assets/js/41.d5ff103d.js"><link rel="prefetch" href="/assets/js/42.f8a1f302.js"><link rel="prefetch" href="/assets/js/43.fde32a5e.js"><link rel="prefetch" href="/assets/js/44.a6b72d28.js"><link rel="prefetch" href="/assets/js/45.cd6aed5f.js"><link rel="prefetch" href="/assets/js/46.b6e863b7.js"><link rel="prefetch" href="/assets/js/47.e4204a71.js"><link rel="prefetch" href="/assets/js/48.7eb4191d.js"><link rel="prefetch" href="/assets/js/49.111da3ef.js"><link rel="prefetch" href="/assets/js/5.51969fc6.js"><link rel="prefetch" href="/assets/js/50.8af254cc.js"><link rel="prefetch" href="/assets/js/51.f51b91ba.js"><link rel="prefetch" href="/assets/js/52.4360031d.js"><link rel="prefetch" href="/assets/js/53.4fccfd2a.js"><link rel="prefetch" href="/assets/js/54.a5e954f8.js"><link rel="prefetch" href="/assets/js/55.15d358c1.js"><link rel="prefetch" href="/assets/js/56.510bcfd6.js"><link rel="prefetch" href="/assets/js/57.efd2750c.js"><link rel="prefetch" href="/assets/js/58.00be9650.js"><link rel="prefetch" href="/assets/js/59.2e6d945e.js"><link rel="prefetch" href="/assets/js/6.081973f6.js"><link rel="prefetch" href="/assets/js/60.0b879501.js"><link rel="prefetch" href="/assets/js/61.df3ec3f3.js"><link rel="prefetch" href="/assets/js/62.a3401510.js"><link rel="prefetch" href="/assets/js/63.7e865578.js"><link rel="prefetch" href="/assets/js/64.de66e438.js"><link rel="prefetch" href="/assets/js/65.241a856d.js"><link rel="prefetch" href="/assets/js/66.ade0818c.js"><link rel="prefetch" href="/assets/js/67.4bd038a9.js"><link rel="prefetch" href="/assets/js/68.7fef4903.js"><link rel="prefetch" href="/assets/js/69.f090bac2.js"><link rel="prefetch" href="/assets/js/7.3a510549.js"><link rel="prefetch" href="/assets/js/70.a508c2fc.js"><link rel="prefetch" href="/assets/js/71.7ac20a6f.js"><link rel="prefetch" href="/assets/js/72.2595df6b.js"><link rel="prefetch" href="/assets/js/73.242961dc.js"><link rel="prefetch" href="/assets/js/74.c32c8367.js"><link rel="prefetch" href="/assets/js/75.6276eea9.js"><link rel="prefetch" href="/assets/js/76.e6d5f089.js"><link rel="prefetch" href="/assets/js/77.9fa22f6a.js"><link rel="prefetch" href="/assets/js/78.d5fa9ff4.js"><link rel="prefetch" href="/assets/js/79.45cc51f6.js"><link rel="prefetch" href="/assets/js/8.13765d57.js"><link rel="prefetch" href="/assets/js/80.f9984007.js"><link rel="prefetch" href="/assets/js/81.4e3c7f6d.js"><link rel="prefetch" href="/assets/js/82.6a7e8bf3.js"><link rel="prefetch" href="/assets/js/83.7109be64.js"><link rel="prefetch" href="/assets/js/84.6b1b0819.js"><link rel="prefetch" href="/assets/js/85.ab08d59b.js"><link rel="prefetch" href="/assets/js/86.f91d8e22.js"><link rel="prefetch" href="/assets/js/87.6a0bca2e.js"><link rel="prefetch" href="/assets/js/88.084d4a30.js"><link rel="prefetch" href="/assets/js/89.7c8b536e.js"><link rel="prefetch" href="/assets/js/9.a738502a.js"><link rel="prefetch" href="/assets/js/90.a528e365.js"><link rel="prefetch" href="/assets/js/91.e94dc0d6.js"><link rel="prefetch" href="/assets/js/92.ea758e70.js"><link rel="prefetch" href="/assets/js/93.c1c6eb8b.js"><link rel="prefetch" href="/assets/js/94.8cf94edc.js"><link rel="prefetch" href="/assets/js/95.6bdf6f23.js"><link rel="prefetch" href="/assets/js/96.5fd142c3.js"><link rel="prefetch" href="/assets/js/97.0caf5518.js"><link rel="prefetch" href="/assets/js/98.becc0aef.js"><link rel="prefetch" href="/assets/js/99.6bbe6917.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.48399bc1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5b7e851c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Teaclave</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  ABOUT
</a></div><div class="nav-item"><a href="/powered-by/" class="nav-link">
  POWERED BY
</a></div><div class="nav-item"><a href="/community/" class="nav-link">
  COMMUNITY
</a></div><div class="nav-item"><a href="/download/" class="nav-link">
  DOWNLOAD
</a></div><div class="nav-item"><a href="/contributors/" class="nav-link">
  CONTRIBUTORS
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="DOCS" class="dropdown-title"><span class="title">DOCS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/" class="nav-link router-link-active">
  Teaclave
</a></li><li class="dropdown-item"><!----> <a href="/sgx-sdk-docs/" class="nav-link">
  Teaclave SGX SDK
</a></li><li class="dropdown-item"><!----> <a href="/trustzone-sdk-docs/" class="nav-link">
  Teaclave TrustZone SDK
</a></li><li class="dropdown-item"><h4>
          APIS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://teaclave.apache.org/api-docs/client-sdk-rust/" target="_self" rel="" class="nav-link external">
  Teaclave Client SDK (Rust)
  <!----></a></li><li class="dropdown-subitem"><a href="https://teaclave.apache.org/api-docs/client-sdk-python/" target="_self" rel="" class="nav-link external">
  Teaclave Client SDK (Python)
  <!----></a></li><li class="dropdown-subitem"><a href="https://teaclave.apache.org/api-docs/sgx-sdk/" target="_self" rel="" class="nav-link external">
  Teaclave SGX SDK
  <!----></a></li><li class="dropdown-subitem"><a href="https://teaclave.apache.org/api-docs/crates-enclave/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (Enclave)
  <!----></a></li><li class="dropdown-subitem"><a href="https://teaclave.apache.org/api-docs/crates-app/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (App)
  <!----></a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/" class="nav-link">
  BLOG
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="REPOS" class="dropdown-title"><span class="title">REPOS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-sgx-sdk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave SGX SDK
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-trustzone-sdk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave TrustZone SDK
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-website" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Apache Software Foundation" class="dropdown-title"><span class="title">ASF</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ASF Homepage
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  License
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Sponsorship
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Security
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Thanks
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Current Event
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  ABOUT
</a></div><div class="nav-item"><a href="/powered-by/" class="nav-link">
  POWERED BY
</a></div><div class="nav-item"><a href="/community/" class="nav-link">
  COMMUNITY
</a></div><div class="nav-item"><a href="/download/" class="nav-link">
  DOWNLOAD
</a></div><div class="nav-item"><a href="/contributors/" class="nav-link">
  CONTRIBUTORS
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="DOCS" class="dropdown-title"><span class="title">DOCS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/" class="nav-link router-link-active">
  Teaclave
</a></li><li class="dropdown-item"><!----> <a href="/sgx-sdk-docs/" class="nav-link">
  Teaclave SGX SDK
</a></li><li class="dropdown-item"><!----> <a href="/trustzone-sdk-docs/" class="nav-link">
  Teaclave TrustZone SDK
</a></li><li class="dropdown-item"><h4>
          APIS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://teaclave.apache.org/api-docs/client-sdk-rust/" target="_self" rel="" class="nav-link external">
  Teaclave Client SDK (Rust)
  <!----></a></li><li class="dropdown-subitem"><a href="https://teaclave.apache.org/api-docs/client-sdk-python/" target="_self" rel="" class="nav-link external">
  Teaclave Client SDK (Python)
  <!----></a></li><li class="dropdown-subitem"><a href="https://teaclave.apache.org/api-docs/sgx-sdk/" target="_self" rel="" class="nav-link external">
  Teaclave SGX SDK
  <!----></a></li><li class="dropdown-subitem"><a href="https://teaclave.apache.org/api-docs/crates-enclave/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (Enclave)
  <!----></a></li><li class="dropdown-subitem"><a href="https://teaclave.apache.org/api-docs/crates-app/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (App)
  <!----></a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/" class="nav-link">
  BLOG
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="REPOS" class="dropdown-title"><span class="title">REPOS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-sgx-sdk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave SGX SDK
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-trustzone-sdk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave TrustZone SDK
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-website" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Apache Software Foundation" class="dropdown-title"><span class="title">ASF</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ASF Homepage
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  License
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Sponsorship
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Security
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Thanks
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Current Event
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Try</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/my-first-function/" class="sidebar-link">My First Function</a></li><li><a href="/docs/functions-in-python/" class="sidebar-link">Write Functions in Python</a></li><li><a href="/docs/builtin-functions/" aria-current="page" class="active sidebar-link">How to Add Built-in Functions</a></li><li><a href="/docs/azure-confidential-computing/" class="sidebar-link">Deploying Teaclave on Azure Confidential Computing Virtual Machines</a></li><li><a href="/docs/executing-wasm/" class="sidebar-link">Executing WebAssembly in Teaclave</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Design</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/threat-model/" class="sidebar-link">Threat Model</a></li><li><a href="/docs/mutual-attestation/" class="sidebar-link">Mutual Attestation: Why and How</a></li><li><a href="/docs/access-control/" class="sidebar-link">Access Control in Teaclave</a></li><li><a href="/docs/build-system/" class="sidebar-link">Build System</a></li><li><a href="/docs/service-internals/" class="sidebar-link">Teaclave Service Internals</a></li><li><a href="/docs/adding-executors/" class="sidebar-link">Adding Executors</a></li><li><a href="/docs/papers-talks/" class="sidebar-link">Papers, Talks, and Related Articles</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Contribute</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/development-tips/" class="sidebar-link">Development Tips</a></li><li><a href="/docs/rust-guildeline/" class="sidebar-link">Rust Development Guideline</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Codebase</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/codebase/attestation/" class="sidebar-link">Attestation in Teaclave</a></li><li><a href="/docs/codebase/binder/" class="sidebar-link">Binder</a></li><li><a href="/docs/codebase/cli/" class="sidebar-link">Teaclave Command Line Tool</a></li><li><a href="/docs/codebase/common/" class="sidebar-link">Common Libraries</a></li><li><a href="/docs/codebase/config/" class="sidebar-link">Configurations in Teaclave</a></li><li><a href="/docs/codebase/crypto/" class="sidebar-link">Crypto Primitives</a></li><li><a href="/docs/codebase/dcap/" class="sidebar-link">Data Center Attestation Service</a></li><li><a href="/docs/codebase/docker/" class="sidebar-link">Teaclave Docker</a></li><li><a href="/docs/codebase/examples/" class="sidebar-link">Examples</a></li><li><a href="/docs/codebase/executor/" class="sidebar-link">Function Executors</a></li><li><a href="/docs/codebase/file-agent/" class="sidebar-link">File Agent</a></li><li><a href="/docs/codebase/function/" class="sidebar-link">Built-in Functions</a></li><li><a href="/docs/codebase/keys/" class="sidebar-link">Keys and Certificates in Teaclave</a></li><li><a href="/docs/codebase/rpc/" class="sidebar-link">RPC</a></li><li><a href="/docs/codebase/runtime/" class="sidebar-link">Executor Runtime</a></li><li><a href="/docs/codebase/sdk/" class="sidebar-link">Client SDK</a></li><li><a href="/docs/codebase/services/" class="sidebar-link">Teaclave Services</a></li><li><a href="/docs/codebase/tests/" class="sidebar-link">Test Harness and Test Cases</a></li><li><a href="/docs/codebase/third-party/" class="sidebar-link">Third-Party Dependency Vendoring</a></li><li><a href="/docs/codebase/tool/" class="sidebar-link">Teaclave SGX Tool</a></li><li><a href="/docs/codebase/types/" class="sidebar-link">Types</a></li><li><a href="/docs/codebase/worker/" class="sidebar-link">Teaclave Worker</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="how-to-add-built-in-functions"><a href="#how-to-add-built-in-functions" class="header-anchor">#</a> How to Add Built-in Functions</h1> <p>There are several ways to execute user-defined functions in the Teaclave
platform. One simple way is to write Python scripts and register them as functions,
and the scripts will be executed by the <em>MesaPy executor</em>. Another way is to add native
functions as built-in functions, and they will be managed by the <em>Built-in executor</em>.
Compared to Python scripts, native built-in functions implemented in Rust are
memory-safe, have better performance, support more third-party libraries and
can be remotely attested as well. In this document, we will guide you through
how to add a built-in function to Teaclave step by step with a &quot;private join and
compute&quot; example.</p> <p>In this example, consider several banks have names and balance of their clients.
These banks want to compute the total balance of common clients in their private
data set without leaking the raw sensitive data to other parties. This is
a perfect usage scenario of the Teaclave platform, and we will provide a
solution by implementing a built-in function in Teaclave.</p> <h2 id="implement-built-in-functions-in-rust"><a href="#implement-built-in-functions-in-rust" class="header-anchor">#</a> Implement Built-in Functions in Rust</h2> <p>All built-in functions are implemented in the <code>teaclave_function</code> crate and can
be selectively compiled using feature gates. Basically, one built-in function
needs two things: a name and a function implementation. Follow the convention of
other built-in function implementations, we define our &quot;private join and
compute&quot; function like this:</p> <div class="language-rust extra-class"><pre class="language-text"><code>#[derive(Default)]
pub struct PrivateJoinAndCompute;

impl PrivateJoinAndCompute {
    pub const NAME: &amp;'static str = &quot;builtin-private-join-and-compute&quot;;
    pub fn new() -&gt; Self {
        Default::default()
    }
    pub fn run(
        &amp;self,
        arguments: FunctionArguments,
        runtime: FunctionRuntime,
    ) -&gt; Result&lt;String&gt; {
        ...
        Ok(summary)
}
</code></pre></div><p>The <code>NAME</code> is the identifier of a function, which is used for creating tasks.
Usually, the name of a built-in function starts with the <code>built-in</code> prefix. In
addition, we need to define an entry point of the function, which is the <code>run</code>
function. The <code>run</code> function can take arguments (in the <code>FunctionAruguments</code>
type) and runtime (in the <code>FunctionRuntime</code> type) for interacting with external
resources (e.g., reading/writing input/output files). Also, the <code>run</code> function
can return a summary of the function execution.</p> <p>Since the function arguments is in the JSON object format and can be easily
deserialized to a Rust struct with <code>serde_json</code>. Therefore, we define a struct
<code>PrivateJoinAndComputeArguments</code> which derive the <code>serde::Deserialize</code> trait for
the conversion. Then we implement <code>TryFrom</code> trait for the struct to convert the
<code>FunctionArguments</code> type to the actual <code>PrivateJoinAndComputeArguments</code> type.</p> <div class="language-rust extra-class"><pre class="language-text"><code>#[derive(serde::Deserialize)]
struct PrivateJoinAndComputeArguments {
    num_user: usize, // Number of users in the multiple party computation
}

impl TryFrom&lt;FunctionArguments&gt; for PrivateJoinAndComputeArguments {
    type Error = anyhow::Error;

    fn try_from(arguments: FunctionArguments) -&gt; Result&lt;Self, Self::Error&gt; {
        use anyhow::Context;
        serde_json::from_str(&amp;arguments.into_string()).context(&quot;Cannot deserialize arguments&quot;)
    }
}

</code></pre></div><p>When executing the function, a <code>runtime</code> object will be passed to the function.
We can read or write files with the <code>runtime</code> with the <code>open_input</code> and
<code>create_output</code> functions.</p> <div class="language-rust extra-class"><pre class="language-text"><code>// Read data from a file
let mut input_io = runtime.open_input(&amp;input_file_name)?;
input_io.read_to_end(&amp;mut data)?;
...
// Write data into a file
let mut output = runtime.create_output(&amp;output_file_name)?;
output.write_all(&amp;output_bytes)?;
</code></pre></div><h2 id="register-functions-in-the-executor"><a href="#register-functions-in-the-executor" class="header-anchor">#</a> Register Functions in the Executor</h2> <p>To use the function, we need to register it to the built-in executor. Please also
put a <code>cfg</code> attribute to make sure developers can conditionally build functions
into the executor.</p> <div class="language-rust extra-class"><pre class="language-text"><code>impl TeaclaveExecutor for BuiltinFunctionExecutor {
    fn execute(
        &amp;self,
        name: String,
        arguments: FunctionArguments,
        _payload: String,
        runtime: FunctionRuntime,
    ) -&gt; Result&lt;String&gt; {
        match name.as_str() {
            ...
            #[cfg(feature = &quot;builtin_private_join_and_compute&quot;)]
            PrivateJoinAndCompute::NAME =&gt; PrivateJoinAndCompute::new().run(arguments, runtime),
            ...
        }
    }
}
</code></pre></div><h2 id="invoke-functions-with-the-client-sdk"><a href="#invoke-functions-with-the-client-sdk" class="header-anchor">#</a> Invoke Functions with the Client SDK</h2> <p>Finally, we can invoke the function with the client SDK. In our example, we use
the Python client SDK. Basically, this process includes registering input/output
files, creating tasks, approving tasks, invoking tasks and getting execution
results. You can see more details in the <code>examples/python</code> directory.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/19/2020, 3:13:12 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/functions-in-python/" class="prev">
        Write Functions in Python
      </a></span> <span class="next"><a href="/docs/azure-confidential-computing/">
        Deploying Teaclave on Azure Confidential Computing Virtual Machines
      </a>
      →
    </span></p></div>  <div class="footer">
    Apache Teaclave (incubating) is an effort undergoing incubation at The Apache
    Software Foundation (ASF), sponsored by the Apache Incubator.
    Incubation is required of all newly accepted projects until a further review
    indicates that the infrastructure, communications, and decision making process
    have stabilized in a manner consistent with other successful ASF projects. While
    incubation status is not necessarily a reflection of the completeness or
    stability of the code, it does indicate that the project has yet to be fully
    endorsed by the ASF.
    Copyright © 2020 The Apache Software Foundation.
    Licensed under the Apache License, Version 2.0.
    Apache Teaclave, Apache, the Apache feather, and the Apache Teaclave project logo are either
    trademarks or registered trademarks of the Apache Software Foundation.
  </div></main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.674f1404.js" defer></script><script src="/assets/js/25.ce874af4.js" defer></script><script src="/assets/js/1.47a17018.js" defer></script><script src="/assets/js/124.393a4a3e.js" defer></script>
  </body>
</html>
