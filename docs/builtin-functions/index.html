<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>How to Add Built-in Functions | Apache Teaclave (Incubating)</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="Apache Teaclave (incubating) is an open source universal secure computing platform, making computation on privacy-sensitive data safe and simple.">
    <meta property="article:modified_time" content="2020-06-19T22:13:12.000Z">
    <meta property="og:site_name" content="Apache Teaclave (Incubating)">
    <meta property="og:title" content="How to Add Built-in Functions">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://teaclave.apache.org/docs/builtin-functions/">
    <meta name="twitter:title" content="How to Add Built-in Functions">
    <meta name="twitter:url" content="https://teaclave.apache.org/docs/builtin-functions/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@ApacheTeaclave">
    <link rel="preload" href="/assets/css/0.styles.dc3f8652.css" as="style"><link rel="preload" href="/assets/js/app.50b05b9d.js" as="script"><link rel="preload" href="/assets/js/5.958b0ced.js" as="script"><link rel="preload" href="/assets/js/1.dfc25e73.js" as="script"><link rel="preload" href="/assets/js/97.bc84de54.js" as="script"><link rel="prefetch" href="/assets/js/10.79a85284.js"><link rel="prefetch" href="/assets/js/100.b9a0ff52.js"><link rel="prefetch" href="/assets/js/101.162b1b89.js"><link rel="prefetch" href="/assets/js/102.bd729aba.js"><link rel="prefetch" href="/assets/js/103.ab01a578.js"><link rel="prefetch" href="/assets/js/104.7fe65212.js"><link rel="prefetch" href="/assets/js/105.6e4049d3.js"><link rel="prefetch" href="/assets/js/106.46bcd958.js"><link rel="prefetch" href="/assets/js/107.54d00aec.js"><link rel="prefetch" href="/assets/js/108.f509e0c7.js"><link rel="prefetch" href="/assets/js/109.3b32a17c.js"><link rel="prefetch" href="/assets/js/11.2314af26.js"><link rel="prefetch" href="/assets/js/110.73d823cb.js"><link rel="prefetch" href="/assets/js/111.21e247c8.js"><link rel="prefetch" href="/assets/js/112.41032df5.js"><link rel="prefetch" href="/assets/js/113.942f7bc2.js"><link rel="prefetch" href="/assets/js/114.cfebb4c1.js"><link rel="prefetch" href="/assets/js/115.374ced31.js"><link rel="prefetch" href="/assets/js/116.1911b56c.js"><link rel="prefetch" href="/assets/js/117.2e19ab66.js"><link rel="prefetch" href="/assets/js/118.a6f7bff1.js"><link rel="prefetch" href="/assets/js/119.eae70aee.js"><link rel="prefetch" href="/assets/js/12.bc18d7ff.js"><link rel="prefetch" href="/assets/js/13.1639fc17.js"><link rel="prefetch" href="/assets/js/14.c3926742.js"><link rel="prefetch" href="/assets/js/15.8beb52d0.js"><link rel="prefetch" href="/assets/js/16.1fd84b80.js"><link rel="prefetch" href="/assets/js/17.4765b185.js"><link rel="prefetch" href="/assets/js/18.5d921088.js"><link rel="prefetch" href="/assets/js/19.2445c37c.js"><link rel="prefetch" href="/assets/js/2.201304d3.js"><link rel="prefetch" href="/assets/js/20.c35da0f9.js"><link rel="prefetch" href="/assets/js/21.4600e19d.js"><link rel="prefetch" href="/assets/js/22.4eb8ce0a.js"><link rel="prefetch" href="/assets/js/23.a553854b.js"><link rel="prefetch" href="/assets/js/24.3bd84312.js"><link rel="prefetch" href="/assets/js/25.5d4bf97d.js"><link rel="prefetch" href="/assets/js/26.3cc912cb.js"><link rel="prefetch" href="/assets/js/27.189662a2.js"><link rel="prefetch" href="/assets/js/28.d2510ace.js"><link rel="prefetch" href="/assets/js/29.f8dc7aa6.js"><link rel="prefetch" href="/assets/js/30.ab01461a.js"><link rel="prefetch" href="/assets/js/31.3061d5dc.js"><link rel="prefetch" href="/assets/js/32.0cd8c437.js"><link rel="prefetch" href="/assets/js/33.8fac761f.js"><link rel="prefetch" href="/assets/js/34.e486ddfd.js"><link rel="prefetch" href="/assets/js/35.241807bd.js"><link rel="prefetch" href="/assets/js/36.a8385838.js"><link rel="prefetch" href="/assets/js/37.6e6dd299.js"><link rel="prefetch" href="/assets/js/38.d609c9fc.js"><link rel="prefetch" href="/assets/js/39.18048d14.js"><link rel="prefetch" href="/assets/js/40.819c2f29.js"><link rel="prefetch" href="/assets/js/41.8a9043ab.js"><link rel="prefetch" href="/assets/js/42.60239b32.js"><link rel="prefetch" href="/assets/js/43.4df53198.js"><link rel="prefetch" href="/assets/js/44.e0a4c22a.js"><link rel="prefetch" href="/assets/js/45.186baca2.js"><link rel="prefetch" href="/assets/js/46.9617a35d.js"><link rel="prefetch" href="/assets/js/47.5ce274ee.js"><link rel="prefetch" href="/assets/js/48.9bec34c3.js"><link rel="prefetch" href="/assets/js/49.f2dcc1ea.js"><link rel="prefetch" href="/assets/js/50.449d1303.js"><link rel="prefetch" href="/assets/js/51.c2ffccf3.js"><link rel="prefetch" href="/assets/js/52.fb9ad34c.js"><link rel="prefetch" href="/assets/js/53.79486c4a.js"><link rel="prefetch" href="/assets/js/54.784d0754.js"><link rel="prefetch" href="/assets/js/55.c3d46f97.js"><link rel="prefetch" href="/assets/js/56.3bc1466c.js"><link rel="prefetch" href="/assets/js/57.a26cbbff.js"><link rel="prefetch" href="/assets/js/58.d19c76e8.js"><link rel="prefetch" href="/assets/js/59.b575f12e.js"><link rel="prefetch" href="/assets/js/6.10959272.js"><link rel="prefetch" href="/assets/js/60.f93190aa.js"><link rel="prefetch" href="/assets/js/61.3344e691.js"><link rel="prefetch" href="/assets/js/62.d26826f2.js"><link rel="prefetch" href="/assets/js/63.3ca9db09.js"><link rel="prefetch" href="/assets/js/64.6803fdff.js"><link rel="prefetch" href="/assets/js/65.c454ea99.js"><link rel="prefetch" href="/assets/js/66.d725dca5.js"><link rel="prefetch" href="/assets/js/67.326b986f.js"><link rel="prefetch" href="/assets/js/68.e83c13de.js"><link rel="prefetch" href="/assets/js/69.d59c43ed.js"><link rel="prefetch" href="/assets/js/7.85bea464.js"><link rel="prefetch" href="/assets/js/70.e39fdbf6.js"><link rel="prefetch" href="/assets/js/71.0c132c9b.js"><link rel="prefetch" href="/assets/js/72.c14dfc41.js"><link rel="prefetch" href="/assets/js/73.f0bb99d5.js"><link rel="prefetch" href="/assets/js/74.46df55c2.js"><link rel="prefetch" href="/assets/js/75.6780194f.js"><link rel="prefetch" href="/assets/js/76.62ae0388.js"><link rel="prefetch" href="/assets/js/77.abb726ae.js"><link rel="prefetch" href="/assets/js/78.ac6db1a0.js"><link rel="prefetch" href="/assets/js/79.52752c54.js"><link rel="prefetch" href="/assets/js/8.49d4e1eb.js"><link rel="prefetch" href="/assets/js/80.c966fffc.js"><link rel="prefetch" href="/assets/js/81.04cda50c.js"><link rel="prefetch" href="/assets/js/82.5648552b.js"><link rel="prefetch" href="/assets/js/83.45dfccbf.js"><link rel="prefetch" href="/assets/js/84.001c9c16.js"><link rel="prefetch" href="/assets/js/85.3af25c00.js"><link rel="prefetch" href="/assets/js/86.cc064540.js"><link rel="prefetch" href="/assets/js/87.5e24fa5e.js"><link rel="prefetch" href="/assets/js/88.e6212067.js"><link rel="prefetch" href="/assets/js/89.c6fd97ac.js"><link rel="prefetch" href="/assets/js/9.363f0c58.js"><link rel="prefetch" href="/assets/js/90.55721969.js"><link rel="prefetch" href="/assets/js/91.daa320fd.js"><link rel="prefetch" href="/assets/js/92.cabf4fce.js"><link rel="prefetch" href="/assets/js/93.60870b5f.js"><link rel="prefetch" href="/assets/js/94.6a51bd8a.js"><link rel="prefetch" href="/assets/js/95.0133b0b8.js"><link rel="prefetch" href="/assets/js/96.2e71618e.js"><link rel="prefetch" href="/assets/js/98.90bc5c09.js"><link rel="prefetch" href="/assets/js/99.d95e181c.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.989c2fd5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.dc3f8652.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Apache Teaclave (Incubating)</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/community/" class="nav-link">
  Community
</a></div><div class="nav-item"><a href="/download/" class="nav-link">
  Download
</a></div><div class="nav-item"><a href="/contributors/" class="nav-link">
  Contributors
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Documentation" class="dropdown-title"><span class="title">Documentation</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/" class="nav-link router-link-active">
  Teaclave
</a></li><li class="dropdown-item"><!----> <a href="/sgx-sdk-docs/" class="nav-link">
  Teaclave SGX SDK
</a></li></ul></div></div><div class="nav-item"><a href="/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API Docs" class="dropdown-title"><span class="title">API Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/client-sdk-python/" target="_self" rel="" class="nav-link external">
  Teaclave Client SDK (Python)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/sgx-sdk/" target="_self" rel="" class="nav-link external">
  Teaclave SGX SDK
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/crates-enclave/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (Enclave)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/crates-app/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (App)
  <!----></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Repository" class="dropdown-title"><span class="title">Repository</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-sgx-sdk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave SGX SDK
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-website" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Apache Software Foundation" class="dropdown-title"><span class="title">ASF</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ASF Homepage
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  License
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Sponsorship
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Security
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Thanks
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Current Event
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/community/" class="nav-link">
  Community
</a></div><div class="nav-item"><a href="/download/" class="nav-link">
  Download
</a></div><div class="nav-item"><a href="/contributors/" class="nav-link">
  Contributors
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Documentation" class="dropdown-title"><span class="title">Documentation</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/" class="nav-link router-link-active">
  Teaclave
</a></li><li class="dropdown-item"><!----> <a href="/sgx-sdk-docs/" class="nav-link">
  Teaclave SGX SDK
</a></li></ul></div></div><div class="nav-item"><a href="/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API Docs" class="dropdown-title"><span class="title">API Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/client-sdk-python/" target="_self" rel="" class="nav-link external">
  Teaclave Client SDK (Python)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/sgx-sdk/" target="_self" rel="" class="nav-link external">
  Teaclave SGX SDK
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/crates-enclave/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (Enclave)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/crates-app/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (App)
  <!----></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Repository" class="dropdown-title"><span class="title">Repository</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-sgx-sdk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave SGX SDK
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-website" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Apache Software Foundation" class="dropdown-title"><span class="title">ASF</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ASF Homepage
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  License
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Sponsorship
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Security
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Thanks
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Current Event
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Try</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/my-first-function/" class="sidebar-link">My First Function</a></li><li><a href="/docs/functions-in-python/" class="sidebar-link">Write Functions in Python</a></li><li><a href="/docs/builtin-functions/" class="active sidebar-link">How to Add Built-in Functions</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Design</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/threat-model/" class="sidebar-link">Threat Model</a></li><li><a href="/docs/mutual-attestation/" class="sidebar-link">Mutual Attestation: Why and How</a></li><li><a href="/docs/access-control/" class="sidebar-link">Access Control in Teaclave</a></li><li><a href="/docs/build-system/" class="sidebar-link">Build System</a></li><li><a href="/docs/service-internals/" class="sidebar-link">Teaclave Service Internals</a></li><li><a href="/docs/papers-talks/" class="sidebar-link">Papers, Talks, and Related Articles</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Contribute</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/development-tips/" class="sidebar-link">Development Tips</a></li><li><a href="/docs/rust-guildeline/" class="sidebar-link">Rust Development Guideline</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Codebase</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/codebase/attestation/" class="sidebar-link">Attestation in Teaclave</a></li><li><a href="/docs/codebase/binder/" class="sidebar-link">Binder</a></li><li><a href="/docs/codebase/cli/" class="sidebar-link">Teaclave Command Line Tool</a></li><li><a href="/docs/codebase/common/" class="sidebar-link">Common Libraries</a></li><li><a href="/docs/codebase/config/" class="sidebar-link">Configurations in Teaclave</a></li><li><a href="/docs/codebase/crypto/" class="sidebar-link">Crypto Primitives</a></li><li><a href="/docs/codebase/dcap/" class="sidebar-link">Data Center Attestation Service</a></li><li><a href="/docs/codebase/docker/" class="sidebar-link">Teaclave Docker</a></li><li><a href="/docs/codebase/examples/" class="sidebar-link">Examples</a></li><li><a href="/docs/codebase/executor/" class="sidebar-link">Function Executors</a></li><li><a href="/docs/codebase/file-agent/" class="sidebar-link">File Agent</a></li><li><a href="/docs/codebase/function/" class="sidebar-link">Built-in Functions</a></li><li><a href="/docs/codebase/keys/" class="sidebar-link">Keys and Certificates in Teaclave</a></li><li><a href="/docs/codebase/rpc/" class="sidebar-link">RPC</a></li><li><a href="/docs/codebase/runtime/" class="sidebar-link">Executor Runtime</a></li><li><a href="/docs/codebase/sdk/" class="sidebar-link">Client SDK</a></li><li><a href="/docs/codebase/services/" class="sidebar-link">Teaclave Services</a></li><li><a href="/docs/codebase/tests/" class="sidebar-link">Test Harness and Test Cases</a></li><li><a href="/docs/codebase/third-party/" class="sidebar-link">Third-Party Dependency Vendoring</a></li><li><a href="/docs/codebase/tool/" class="sidebar-link">Teaclave SGX Tool</a></li><li><a href="/docs/codebase/types/" class="sidebar-link">Types</a></li><li><a href="/docs/codebase/worker/" class="sidebar-link">Teaclave Worker</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="how-to-add-built-in-functions"><a href="#how-to-add-built-in-functions" class="header-anchor">#</a> How to Add Built-in Functions</h1> <p>There are several ways to execute user-defined functions in the Teaclave
platform. One simple way is to write Python scripts and register them as functions,
and the scripts will be executed by the <em>MesaPy executor</em>. Another way is to add native
functions as built-in functions, and they will be managed by the <em>Built-in executor</em>.
Compared to Python scripts, native built-in functions implemented in Rust are
memory-safe, have better performance, support more third-party libraries and
can be remotely attested as well. In this document, we will guide you through
how to add a built-in function to Teaclave step by step with a &quot;private join and
compute&quot; example.</p> <p>In this example, consider several banks have names and balance of their clients.
These banks want to compute the total balance of common clients in their private
data set without leaking the raw sensitive data to other parties. This is
a perfect usage scenario of the Teaclave platform, and we will provide a
solution by implementing a built-in function in Teaclave.</p> <h2 id="implement-built-in-functions-in-rust"><a href="#implement-built-in-functions-in-rust" class="header-anchor">#</a> Implement Built-in Functions in Rust</h2> <p>All built-in functions are implemented in the <code>teaclave_function</code> crate and can
be selectively compiled using feature gates. Basically, one built-in function
needs two things: a name and a function implementation. Follow the convention of
other built-in function implementations, we define our &quot;private join and
compute&quot; function like this:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token attribute attr-name">#[derive(Default)]</span>
<span class="token keyword">pub</span> <span class="token keyword">struct</span> PrivateJoinAndCompute<span class="token punctuation">;</span>

<span class="token keyword">impl</span> PrivateJoinAndCompute <span class="token punctuation">{</span>
    <span class="token keyword">pub</span> <span class="token keyword">const</span> NAME<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'static</span> str <span class="token operator">=</span> <span class="token string">&quot;builtin-private-join-and-compute&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">Self</span> <span class="token punctuation">{</span>
        Default<span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">run</span><span class="token punctuation">(</span>
        <span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span>
        arguments<span class="token punctuation">:</span> FunctionArguments<span class="token punctuation">,</span>
        runtime<span class="token punctuation">:</span> FunctionRuntime<span class="token punctuation">,</span>
    <span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> Result<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token punctuation">...</span>
        <span class="token function">Ok</span><span class="token punctuation">(</span>summary<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The <code>NAME</code> is the identifier of a function, which is used for creating tasks.
Usually, the name of a built-in function starts with the <code>built-in</code> prefix. In
addition, we need to define an entry point of the function, which is the <code>run</code>
function. The <code>run</code> function can take arguments (in the <code>FunctionAruguments</code>
type) and runtime (in the <code>FunctionRuntime</code> type) for interacting with external
resources (e.g., reading/writing input/output files). Also, the <code>run</code> function
can return a summary of the function execution.</p> <p>Since the function arguments is in the JSON object format and can be easily
deserialized to a Rust struct with <code>serde_json</code>. Therefore, we define a struct
<code>PrivateJoinAndComputeArguments</code> which derive the <code>serde::Deserialize</code> trait for
the conversion. Then we implement <code>TryFrom</code> trait for the struct to convert the
<code>FunctionArguments</code> type to the actual <code>PrivateJoinAndComputeArguments</code> type.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token attribute attr-name">#[derive(serde::Deserialize)]</span>
<span class="token keyword">struct</span> PrivateJoinAndComputeArguments <span class="token punctuation">{</span>
    num_user<span class="token punctuation">:</span> usize<span class="token punctuation">,</span> <span class="token comment">// Number of users in the multiple party computation</span>
<span class="token punctuation">}</span>

<span class="token keyword">impl</span> TryFrom<span class="token operator">&lt;</span>FunctionArguments<span class="token operator">&gt;</span> <span class="token keyword">for</span> PrivateJoinAndComputeArguments <span class="token punctuation">{</span>
    <span class="token keyword">type</span> Error <span class="token operator">=</span> anyhow<span class="token punctuation">::</span>Error<span class="token punctuation">;</span>

    <span class="token keyword">fn</span> <span class="token function">try_from</span><span class="token punctuation">(</span>arguments<span class="token punctuation">:</span> FunctionArguments<span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> Result<span class="token operator">&lt;</span><span class="token keyword">Self</span><span class="token punctuation">,</span> <span class="token keyword">Self</span><span class="token punctuation">::</span>Error<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">use</span> anyhow<span class="token punctuation">::</span>Context<span class="token punctuation">;</span>
        serde_json<span class="token punctuation">::</span><span class="token function">from_str</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>arguments<span class="token punctuation">.</span><span class="token function">into_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">&quot;Cannot deserialize arguments&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>When executing the function, a <code>runtime</code> object will be passed to the function.
We can read or write files with the <code>runtime</code> with the <code>open_input</code> and
<code>create_output</code> functions.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// Read data from a file</span>
<span class="token keyword">let</span> <span class="token keyword">mut</span> input_io <span class="token operator">=</span> runtime<span class="token punctuation">.</span><span class="token function">open_input</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>input_file_name<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
input_io<span class="token punctuation">.</span><span class="token function">read_to_end</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> data<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
<span class="token punctuation">...</span>
<span class="token comment">// Write data into a file</span>
<span class="token keyword">let</span> <span class="token keyword">mut</span> output <span class="token operator">=</span> runtime<span class="token punctuation">.</span><span class="token function">create_output</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>output_file_name<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
output<span class="token punctuation">.</span><span class="token function">write_all</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>output_bytes<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="register-functions-in-the-executor"><a href="#register-functions-in-the-executor" class="header-anchor">#</a> Register Functions in the Executor</h2> <p>To use the function, we need to register it to the built-in executor. Please also
put a <code>cfg</code> attribute to make sure developers can conditionally build functions
into the executor.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">impl</span> TeaclaveExecutor <span class="token keyword">for</span> BuiltinFunctionExecutor <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function">execute</span><span class="token punctuation">(</span>
        <span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span>
        name<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
        arguments<span class="token punctuation">:</span> FunctionArguments<span class="token punctuation">,</span>
        _payload<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
        runtime<span class="token punctuation">:</span> FunctionRuntime<span class="token punctuation">,</span>
    <span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> Result<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">match</span> name<span class="token punctuation">.</span><span class="token function">as_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">...</span>
            <span class="token attribute attr-name">#[cfg(feature = &quot;builtin_private_join_and_compute&quot;)]</span>
            PrivateJoinAndCompute<span class="token punctuation">::</span>NAME <span class="token operator">=&gt;</span> PrivateJoinAndCompute<span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> runtime<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">...</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="invoke-functions-with-the-client-sdk"><a href="#invoke-functions-with-the-client-sdk" class="header-anchor">#</a> Invoke Functions with the Client SDK</h2> <p>Finally, we can invoke the function with the client SDK. In our example, we use
the Python client SDK. Basically, this process includes registering input/output
files, creating tasks, approving tasks, invoking tasks and getting execution
results. You can see more details in the <code>examples/python</code> directory.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/19/2020, 3:13:12 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/functions-in-python/" class="prev">
        Write Functions in Python
      </a></span> <span class="next"><a href="/docs/threat-model/">
        Threat Model
      </a>
      →
    </span></p></div>  <div class="footer">
    Apache Teaclave (incubating) is an effort undergoing incubation at The Apache
    Software Foundation (ASF), sponsored by the Apache Incubator.
    Incubation is required of all newly accepted projects until a further review
    indicates that the infrastructure, communications, and decision making process
    have stabilized in a manner consistent with other successful ASF projects. While
    incubation status is not necessarily a reflection of the completeness or
    stability of the code, it does indicate that the project has yet to be fully
    endorsed by the ASF.
    Copyright © 2020 The Apache Software Foundation.
    Licensed under the Apache License, Version 2.0.
    Apache Teaclave, Apache, the Apache feather, and the Apache Teaclave project logo are either
    trademarks or registered trademarks of the Apache Software Foundation.
  </div></main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.50b05b9d.js" defer></script><script src="/assets/js/5.958b0ced.js" defer></script><script src="/assets/js/1.dfc25e73.js" defer></script><script src="/assets/js/97.bc84de54.js" defer></script>
  </body>
</html>
