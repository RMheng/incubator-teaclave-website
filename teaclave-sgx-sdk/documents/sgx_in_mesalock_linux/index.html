<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Run Rust SGX Applications in Mesalock Linux | Apache Teaclave (incubating)</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="Apache Teaclave (incubating) is an open source universal secure computing platform, making computation on privacy-sensitive data safe and simple.">
    <meta property="article:modified_time" content="2019-12-17T05:48:53.000Z">
    <meta property="og:site_name" content="Apache Teaclave (incubating)">
    <meta property="og:title" content="Run Rust SGX Applications in Mesalock Linux">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://teaclave.apache.org/teaclave-sgx-sdk/documents/sgx_in_mesalock_linux/">
    <meta name="twitter:title" content="Run Rust SGX Applications in Mesalock Linux">
    <meta name="twitter:url" content="https://teaclave.apache.org/teaclave-sgx-sdk/documents/sgx_in_mesalock_linux/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@ApacheTeaclave">
    <link rel="preload" href="/assets/css/0.styles.4d30ecb8.css" as="style"><link rel="preload" href="/assets/js/app.5f89a569.js" as="script"><link rel="preload" href="/assets/js/5.cd5894ed.js" as="script"><link rel="preload" href="/assets/js/1.04515b92.js" as="script"><link rel="preload" href="/assets/js/27.230b45d5.js" as="script"><link rel="prefetch" href="/assets/js/10.f0acf912.js"><link rel="prefetch" href="/assets/js/100.8eb80875.js"><link rel="prefetch" href="/assets/js/101.044f6f01.js"><link rel="prefetch" href="/assets/js/102.d8e7b285.js"><link rel="prefetch" href="/assets/js/103.10881ab5.js"><link rel="prefetch" href="/assets/js/104.833cdf44.js"><link rel="prefetch" href="/assets/js/105.56d435d1.js"><link rel="prefetch" href="/assets/js/106.ac35e0a5.js"><link rel="prefetch" href="/assets/js/107.c29566f6.js"><link rel="prefetch" href="/assets/js/108.2fd9e717.js"><link rel="prefetch" href="/assets/js/109.93475c6b.js"><link rel="prefetch" href="/assets/js/11.8ef4cfbf.js"><link rel="prefetch" href="/assets/js/110.d262374b.js"><link rel="prefetch" href="/assets/js/111.caa865f7.js"><link rel="prefetch" href="/assets/js/112.aaef39fa.js"><link rel="prefetch" href="/assets/js/113.ab76bb72.js"><link rel="prefetch" href="/assets/js/114.ef3d693f.js"><link rel="prefetch" href="/assets/js/115.0353244d.js"><link rel="prefetch" href="/assets/js/116.153318cb.js"><link rel="prefetch" href="/assets/js/117.c033c2f9.js"><link rel="prefetch" href="/assets/js/118.18ba1ca1.js"><link rel="prefetch" href="/assets/js/119.7cbd25c9.js"><link rel="prefetch" href="/assets/js/12.d581c14d.js"><link rel="prefetch" href="/assets/js/13.6d75756e.js"><link rel="prefetch" href="/assets/js/14.21ad7dad.js"><link rel="prefetch" href="/assets/js/15.15cbfad4.js"><link rel="prefetch" href="/assets/js/16.ed4aaef1.js"><link rel="prefetch" href="/assets/js/17.54184728.js"><link rel="prefetch" href="/assets/js/18.8adcd848.js"><link rel="prefetch" href="/assets/js/19.ae8e8592.js"><link rel="prefetch" href="/assets/js/2.9c495c05.js"><link rel="prefetch" href="/assets/js/20.d84d4fc2.js"><link rel="prefetch" href="/assets/js/21.88a2bf53.js"><link rel="prefetch" href="/assets/js/22.010d22fe.js"><link rel="prefetch" href="/assets/js/23.b608d419.js"><link rel="prefetch" href="/assets/js/24.1a4734a3.js"><link rel="prefetch" href="/assets/js/25.a6f56816.js"><link rel="prefetch" href="/assets/js/26.4893c93d.js"><link rel="prefetch" href="/assets/js/28.59be8336.js"><link rel="prefetch" href="/assets/js/29.c421c94d.js"><link rel="prefetch" href="/assets/js/30.ceb2775a.js"><link rel="prefetch" href="/assets/js/31.67c5c60b.js"><link rel="prefetch" href="/assets/js/32.40452e44.js"><link rel="prefetch" href="/assets/js/33.607a6518.js"><link rel="prefetch" href="/assets/js/34.a92fd233.js"><link rel="prefetch" href="/assets/js/35.2f6f313c.js"><link rel="prefetch" href="/assets/js/36.5d5e30fc.js"><link rel="prefetch" href="/assets/js/37.96209623.js"><link rel="prefetch" href="/assets/js/38.064bcf4f.js"><link rel="prefetch" href="/assets/js/39.ffa2d151.js"><link rel="prefetch" href="/assets/js/40.afe9f87f.js"><link rel="prefetch" href="/assets/js/41.a02dce1d.js"><link rel="prefetch" href="/assets/js/42.aab2a58f.js"><link rel="prefetch" href="/assets/js/43.34de2333.js"><link rel="prefetch" href="/assets/js/44.a5d19c6c.js"><link rel="prefetch" href="/assets/js/45.e8b1239c.js"><link rel="prefetch" href="/assets/js/46.778a3d9a.js"><link rel="prefetch" href="/assets/js/47.f0f41b44.js"><link rel="prefetch" href="/assets/js/48.bee2ad14.js"><link rel="prefetch" href="/assets/js/49.4f4e4c69.js"><link rel="prefetch" href="/assets/js/50.eb320f91.js"><link rel="prefetch" href="/assets/js/51.5784a84e.js"><link rel="prefetch" href="/assets/js/52.789d9165.js"><link rel="prefetch" href="/assets/js/53.2ce89a76.js"><link rel="prefetch" href="/assets/js/54.9448fadd.js"><link rel="prefetch" href="/assets/js/55.225a4ddf.js"><link rel="prefetch" href="/assets/js/56.6e756b40.js"><link rel="prefetch" href="/assets/js/57.4804e2f4.js"><link rel="prefetch" href="/assets/js/58.d22487d5.js"><link rel="prefetch" href="/assets/js/59.72a05bb5.js"><link rel="prefetch" href="/assets/js/6.7c86080e.js"><link rel="prefetch" href="/assets/js/60.e8ab22cb.js"><link rel="prefetch" href="/assets/js/61.01cac843.js"><link rel="prefetch" href="/assets/js/62.bff75d46.js"><link rel="prefetch" href="/assets/js/63.9d47944b.js"><link rel="prefetch" href="/assets/js/64.652a7941.js"><link rel="prefetch" href="/assets/js/65.7100a276.js"><link rel="prefetch" href="/assets/js/66.10445698.js"><link rel="prefetch" href="/assets/js/67.c8fee999.js"><link rel="prefetch" href="/assets/js/68.321ba724.js"><link rel="prefetch" href="/assets/js/69.30aca2a0.js"><link rel="prefetch" href="/assets/js/7.85bea464.js"><link rel="prefetch" href="/assets/js/70.eb897bd0.js"><link rel="prefetch" href="/assets/js/71.78329d55.js"><link rel="prefetch" href="/assets/js/72.b52da6cc.js"><link rel="prefetch" href="/assets/js/73.dc071b9e.js"><link rel="prefetch" href="/assets/js/74.c77c95a5.js"><link rel="prefetch" href="/assets/js/75.2e5bd792.js"><link rel="prefetch" href="/assets/js/76.02254bf0.js"><link rel="prefetch" href="/assets/js/77.e41b7487.js"><link rel="prefetch" href="/assets/js/78.3fdfb0d8.js"><link rel="prefetch" href="/assets/js/79.093406b5.js"><link rel="prefetch" href="/assets/js/8.b77a0d53.js"><link rel="prefetch" href="/assets/js/80.770f3a65.js"><link rel="prefetch" href="/assets/js/81.9bfc5562.js"><link rel="prefetch" href="/assets/js/82.84916a54.js"><link rel="prefetch" href="/assets/js/83.5e8a9f0f.js"><link rel="prefetch" href="/assets/js/84.2051824d.js"><link rel="prefetch" href="/assets/js/85.0669745a.js"><link rel="prefetch" href="/assets/js/86.c40602d8.js"><link rel="prefetch" href="/assets/js/87.87d9e6b6.js"><link rel="prefetch" href="/assets/js/88.8c0fd572.js"><link rel="prefetch" href="/assets/js/89.53269b69.js"><link rel="prefetch" href="/assets/js/9.976c662b.js"><link rel="prefetch" href="/assets/js/90.86eb05d3.js"><link rel="prefetch" href="/assets/js/91.7ec7cb9d.js"><link rel="prefetch" href="/assets/js/92.1fee5a5a.js"><link rel="prefetch" href="/assets/js/93.cd6af01e.js"><link rel="prefetch" href="/assets/js/94.cc6ff07f.js"><link rel="prefetch" href="/assets/js/95.2f56c6ca.js"><link rel="prefetch" href="/assets/js/96.f4931448.js"><link rel="prefetch" href="/assets/js/97.bcbb3008.js"><link rel="prefetch" href="/assets/js/98.6ba4f1a0.js"><link rel="prefetch" href="/assets/js/99.dab4f833.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.989c2fd5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4d30ecb8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Teaclave</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/community/" class="nav-link">
  Community
</a></div><div class="nav-item"><a href="/download/" class="nav-link">
  Download
</a></div><div class="nav-item"><a href="/contributors/" class="nav-link">
  Contributors
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Documentation" class="dropdown-title"><span class="title">Documentation</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/" class="nav-link">
  Teaclave
</a></li><li class="dropdown-item"><!----> <a href="/sgx-sdk-docs/" class="nav-link">
  Teaclave SGX SDK
</a></li></ul></div></div><div class="nav-item"><a href="/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API Docs" class="dropdown-title"><span class="title">API Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/client-sdk-python/" target="_self" rel="" class="nav-link external">
  Teaclave Client SDK (Python)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/sgx-sdk/" target="_self" rel="" class="nav-link external">
  Teaclave SGX SDK
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/crates-enclave/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (Enclave)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/crates-app/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (App)
  <!----></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Repository" class="dropdown-title"><span class="title">Repository</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-sgx-sdk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave SGX SDK
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-website" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Apache Software Foundation" class="dropdown-title"><span class="title">ASF</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ASF Homepage
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  License
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Sponsorship
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Security
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Thanks
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Current Event
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/community/" class="nav-link">
  Community
</a></div><div class="nav-item"><a href="/download/" class="nav-link">
  Download
</a></div><div class="nav-item"><a href="/contributors/" class="nav-link">
  Contributors
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Documentation" class="dropdown-title"><span class="title">Documentation</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/" class="nav-link">
  Teaclave
</a></li><li class="dropdown-item"><!----> <a href="/sgx-sdk-docs/" class="nav-link">
  Teaclave SGX SDK
</a></li></ul></div></div><div class="nav-item"><a href="/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API Docs" class="dropdown-title"><span class="title">API Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/client-sdk-python/" target="_self" rel="" class="nav-link external">
  Teaclave Client SDK (Python)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/sgx-sdk/" target="_self" rel="" class="nav-link external">
  Teaclave SGX SDK
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/crates-enclave/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (Enclave)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/crates-app/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (App)
  <!----></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Repository" class="dropdown-title"><span class="title">Repository</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-sgx-sdk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave SGX SDK
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-website" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Apache Software Foundation" class="dropdown-title"><span class="title">ASF</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ASF Homepage
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  License
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Sponsorship
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Security
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Thanks
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Current Event
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Development</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/sgx-sdk-docs/developing-with-vscode/" class="sidebar-link">Developing with Visual Studio Code</a></li><li><a href="/sgx-sdk-docs/is_x86_feature_detected-in-sgx-sdk/" class="sidebar-link">is_x86_feature_detected in Teaclave SGX SDK</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Security</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/sgx-sdk-docs/everything-about-cve-2020-5499/" class="sidebar-link">Everything about CVE-2020-5499</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="run-rust-sgx-applications-in-mesalock-linux"><a href="#run-rust-sgx-applications-in-mesalock-linux" class="header-anchor">#</a> Run Rust SGX Applications in Mesalock Linux</h1> <p>MesaLock Linux is a general purpose Linux distribution which aims to provide a safe and secure user space environment. To eliminate high-severe vulnerabilities caused by memory corruption, the whole user space applications are rewritten in memory-safe programming languages like Rust and Go. This extremely reduces attack surfaces of an operating system exposed in the wild, leaving the remaining attack surfaces auditable and restricted.  Therefore, MesaLock Linux can substantially improve the security of the Linux ecosystem. Additionally, thanks to the Linux kernel, MesaLock Linux supports a broad hardware environment, making it deployable in many places. Two main usage scenarios of MesaLock Linux are for containers and security-sensitive embedded devices. With the growth of the ecosystem, MesaLock Linux would also be adopted in the server environment in the future.</p> <p>We believe that running Rust SGX applications inside Mesalock Linux could improve the security of SGX applications and reduce their attack surface significantly.</p> <h2 id="is-it-safe-to-run-rust-sgx-applications-in-mesalock-linux"><a href="#is-it-safe-to-run-rust-sgx-applications-in-mesalock-linux" class="header-anchor">#</a> Is it safe to run Rust SGX applications in Mesalock Linux?</h2> <p>A typical Rust SGX application has at least to components: one enclave, and one untrusted component. The enclave is self-contained and doesn't need dynamic loading. The untrusted component depends on <code>liburts</code> (untrusted runtime service library), which depends on the Application Enclave Services Manager library.</p> <p>We show the dependency tree as follows. In this tree, we hide all the dynamic libraries which already exist in Mesalock Linux.</p> <div class="language-bash extra-class"><pre class="language-text"><code>SGX Application
├── Enclave (statically linked)
└── Untrusted component
    └── SGX untrusted runtime (libsgx_urts.so)
        ├── libstdc++ (libstdc++.so.6)
        └── AESM service library (libsgx_uae_service.so)
            └── libprotobuf (libprotobuf.so.9)
                ├── libstdc++ (libstdc++.so.6)
                └── zlib (libz.so.1)    
</code></pre></div><p>We can see that, to support Rust SGX applications in Mesalock Linux, the minimum set of required shared library is : libsgx_urts.so, libsgx_uae_service.so, libstdc++.so.6, libz.so.1 and libprotobuf.so.9.</p> <p>We refined the rules-of-thumb for hybrid memory-safe architecture designing and here is the refined version.</p> <ol><li>Unsafe components must not taint safe components, especially for public APIs and data structures.</li> <li>Unsafe components should be as small as possible and decoupled from safe components.</li> <li>Unsafe components should be explicitly marked during deployment and ready to upgrade.</li></ol> <p>Hence, we believe that running Rust SGX applications in Mesalock Linux could provide better security guarantees if they follow the memory safety principles.</p> <h2 id="solution-overview"><a href="#solution-overview" class="header-anchor">#</a> Solution Overview</h2> <p>The whole solution contains two steps:</p> <ol><li>Build Rust SGX applications in dev environment, such as Rust SGX docker container.</li> <li>Run Rust SGX application in Mesalock Linux docker container.</li></ol> <p>Step 1 is trivial.</p> <p>For step 2, the Intel AESM service is required. Technically, Intel AESM service listens at a domain socket <code>/var/run/aesmd/aesm.socket</code> and provide service via this domain socket. To interact with CPU, Intel AESM service needs to access <code>/dev/isgx</code>.</p> <p>There are two options for running the aesm service: (1) start <code>aesmd</code> inside the Mesalock Linux container, or (2) start <code>aesmd</code> on the host OS and provide service to the SGX application inside the container. The first method provides better isolation for <code>aesmd</code>, but it would start a set of infrastructure enclaves for each docker container, wasting the limited EPC memory. The second one only launches one set of infrastructure enclaves for all SGX containers and we believe it is more efficient.</p> <p>In our current solution, we put the AESM service process <code>aesmd</code> outside the Mesalock Linux docker container and only expose the domain socket <code>/var/run/aesm/aesm.socket</code> to the container. In this way, we isolate the AESM service along with the six foundation enclaves (Launch Enclave/Quoting Enclave/Provisioning Enclave/Provisioning Certification Enclave/Platform Service Enclave for long term pairing/Platform Service Enclave for session management) from Mesalock Linux docker container.</p> <p><img src="mesa.png" alt="overview"></p> <h2 id="requirements"><a href="#requirements" class="header-anchor">#</a> Requirements</h2> <p>Rust SGX SDK and docker</p> <h2 id="step-by-step-guide"><a href="#step-by-step-guide" class="header-anchor">#</a> Step-by-step Guide</h2> <p>Step 1 : build SGX application in Rust SGX dev docker container.</p> <div class="language-bash extra-class"><pre class="language-text"><code>$ git pull git@github.com:apache/teaclave-sgx-sdk.git
$ docker run -v /path/to/rust-sgx-sdk:/root/sgx -ti --device /dev/isgx baiduxlab/sgx-rust
</code></pre></div><p>In the Rust SGX dev docker container:</p> <div class="language-bash extra-class"><pre class="language-text"><code>$ cd /root/sgx/samplecode/hello-rust
$ make
...(ignored many lines)...
&lt;/EnclaveConfiguration&gt;
tcs_num 1, tcs_max_num 1, tcs_min_pool 1
The required memory is 1732608B.
Succeed.
SIGN =&gt;  bin/enclave.signed.so
$ exit
</code></pre></div><p>Now the <code>hello-rust</code> sample has been compiled successfully.</p> <p>Step 2 : run SGX application in Mesalock Linux docker container</p> <div class="language-bash extra-class"><pre class="language-text"><code>$ docker run --rm -ti \
             --device /dev/isgx \                               # forward isgx device
             -v /path/to/rust-sgx-sdk:/root/sgx \               # add SDK
             -v /path/to/rust-sgx-sdk/mesalock-rt:/opt/sgxrt \  # add runtime lib
             -v /var/run/aesmd:/var/run/aesmd \                 # forward domain socket
             -e LD_LIBRARY_PATH=/opt/sgxrt \                    # set lib path
             -w /root/sgx/samplecode/hello-rust/bin \           # set working dir
             mesalocklinux/mesalock-linux
</code></pre></div><p>Now the Mesalock Linux docker container has been initiated using method (2) and an Ion shell has been launched. In the container, we execute:</p> <div class="language-bash extra-class"><pre class="language-text"><code>:/root/sgx/samplecode/hello-rust/bin$ ./app
[+] Home dir is /root
[-] Open token file /root/enclave.token error! Will create one.
[+] Saved updated launch token!
[+] Init Enclave Successful 2!
This is a normal world string passed into Enclave!
This is a in-Enclave Rust string!
[+] say_something success...
</code></pre></div><h2 id="mesalock-rt-runtime-details"><a href="#mesalock-rt-runtime-details" class="header-anchor">#</a> mesalock-rt Runtime Details</h2> <p>All these runtime shared libraries come from official releases, including Intel SGX SDK v2.0 release and Ubuntu 16.04 package archive.</p> <table><thead><tr><th>File</th> <th>Size</th> <th>SHA256</th> <th>Comes from</th></tr></thead> <tbody><tr><td>libprotobuf.so.9</td> <td>1170328</td> <td>abd8b868f0f06584c30edbee90e27e2f8546ffe5bbe938922f62c5821b243925</td> <td><a href="http://archive.ubuntu.com/ubuntu/pool/main/p/protobuf/libprotobuf9v5_2.6.1-1.3_amd64.deb" target="_blank" rel="noopener noreferrer">libprotobuf9v5_2.6.1-1.3_amd64.deb</a></td></tr> <tr><td>libsgx_uae_service.so</td> <td>359944</td> <td>67de93140307268871eb0e00ade9fc800bf3f45371b68ac79157c71b454edbaa</td> <td><a href="https://download.01.org/intel-sgx/linux-2.0/sgx_linux_ubuntu16.04.1_x64_psw_2.0.100.40950.bin" target="_blank" rel="noopener noreferrer">sgx_linux_ubuntu16.04.1_x64_psw_2.0.100.40950.bin</a></td></tr> <tr><td>libsgx_urts.so</td> <td>166376</td> <td>05a15c27432bded48b49b98f94649b4e90abaedbb4ce8f3c44baa1ff5ce2493d</td> <td><a href="https://download.01.org/intel-sgx/linux-2.0/sgx_linux_ubuntu16.04.1_x64_psw_2.0.100.40950.bin" target="_blank" rel="noopener noreferrer">sgx_linux_ubuntu16.04.1_x64_psw_2.0.100.40950.bin</a></td></tr> <tr><td>libstdc++.so.6</td> <td>1594800</td> <td>5e68ec758e36fb2db90f6be673cf4112d144a2f29ba400cd5c6e0c8e56ad9408</td> <td><a href="https://launchpad.net/~ubuntu-toolchain-r/+archive/ubuntu/test/+files/libstdc++6_7.2.0-1ubuntu1~16.04_amd64.deb" target="_blank" rel="noopener noreferrer">libstdc++6_7.2.0-1ubuntu1~16.04_amd64.deb</a></td></tr> <tr><td>libz.so.1</td> <td>104864</td> <td>a04cab74df9c7f96f82b34286bda5d4ee810feaac92dd2e8bcfe931d9c8baef4</td> <td><a href="http://us.archive.ubuntu.com/ubuntu/pool/main/z/zlib/zlib1g_1.2.11.dfsg-0ubuntu1_amd64.deb" target="_blank" rel="noopener noreferrer">zlib1g_1.2.11.dfsg-0ubuntu1_amd64.deb</a></td></tr></tbody></table></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/16/2019, 9:48:53 PM</span></div></footer> <!---->  <div class="footer">
    Apache Teaclave (incubating) is an effort undergoing incubation at The Apache
    Software Foundation (ASF), sponsored by the Apache Incubator.
    Incubation is required of all newly accepted projects until a further review
    indicates that the infrastructure, communications, and decision making process
    have stabilized in a manner consistent with other successful ASF projects. While
    incubation status is not necessarily a reflection of the completeness or
    stability of the code, it does indicate that the project has yet to be fully
    endorsed by the ASF.
    Copyright © 2020 The Apache Software Foundation.
    Licensed under the Apache License, Version 2.0.
    Apache Teaclave, Apache, the Apache feather, and the Apache Teaclave project logo are either
    trademarks or registered trademarks of the Apache Software Foundation.
  </div></main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.5f89a569.js" defer></script><script src="/assets/js/5.cd5894ed.js" defer></script><script src="/assets/js/1.04515b92.js" defer></script><script src="/assets/js/27.230b45d5.js" defer></script>
  </body>
</html>
