<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Getting Started with OP-TEE for QEMU ARMv8 | Apache Teaclave (incubating)</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Cutive+Mono|Roboto:100,300,400,500,700,900|Roboto+Condensed:300,400|Noto+Sans+SC:400,500,700,900">
    <script src="https://use.fontawesome.com/releases/v5.15.0/js/all.js"></script>
    <link rel="alternate" type="application/rss+xml" href="https://teaclave.apache.org/rss.xml" title="Apache Teaclave (incubating) RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="https://teaclave.apache.org/feed.atom" title="Apache Teaclave (incubating) Atom Feed">
    <link rel="alternate" type="application/json" href="https://teaclave.apache.org/feed.json" title="Apache Teaclave (incubating) JSON Feed">
    <meta name="description" content="Apache Teaclave (incubating) is an open source universal secure computing platform, making computation on privacy-sensitive data safe and simple.">
    <meta property="article:modified_time" content="2021-03-16T21:53:34.000Z">
    <meta property="og:site_name" content="Apache Teaclave (incubating)">
    <meta property="og:title" content="Getting Started with OP-TEE for QEMU ARMv8">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://teaclave.apache.org/trustzone-sdk-docs/getting-started-with-optee-for-qemu-armv8/">
    <meta name="twitter:title" content="Getting Started with OP-TEE for QEMU ARMv8">
    <meta name="twitter:url" content="https://teaclave.apache.org/trustzone-sdk-docs/getting-started-with-optee-for-qemu-armv8/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@ApacheTeaclave">
    <link rel="preload" href="/assets/css/0.styles.7a857d1b.css" as="style"><link rel="preload" href="/assets/js/app.99e54d87.js" as="script"><link rel="preload" href="/assets/js/5.ad581026.js" as="script"><link rel="preload" href="/assets/js/1.c33c3cc0.js" as="script"><link rel="preload" href="/assets/js/92.6164c0e6.js" as="script"><link rel="prefetch" href="/assets/js/10.0a6ba823.js"><link rel="prefetch" href="/assets/js/100.709e9f4a.js"><link rel="prefetch" href="/assets/js/101.a5fc8739.js"><link rel="prefetch" href="/assets/js/102.fdd5f058.js"><link rel="prefetch" href="/assets/js/103.0435e13c.js"><link rel="prefetch" href="/assets/js/104.851f4a49.js"><link rel="prefetch" href="/assets/js/105.e60cb7e6.js"><link rel="prefetch" href="/assets/js/106.8b170472.js"><link rel="prefetch" href="/assets/js/107.34aa6354.js"><link rel="prefetch" href="/assets/js/108.6629fc0b.js"><link rel="prefetch" href="/assets/js/109.0d4d2b9c.js"><link rel="prefetch" href="/assets/js/11.df53231f.js"><link rel="prefetch" href="/assets/js/110.5072ba1a.js"><link rel="prefetch" href="/assets/js/111.8a537b5c.js"><link rel="prefetch" href="/assets/js/112.56c702d1.js"><link rel="prefetch" href="/assets/js/113.9aae510d.js"><link rel="prefetch" href="/assets/js/114.b41d299d.js"><link rel="prefetch" href="/assets/js/115.73be8f03.js"><link rel="prefetch" href="/assets/js/116.50d025ae.js"><link rel="prefetch" href="/assets/js/117.4464d109.js"><link rel="prefetch" href="/assets/js/118.71513eab.js"><link rel="prefetch" href="/assets/js/119.057f99bb.js"><link rel="prefetch" href="/assets/js/12.ff8e546d.js"><link rel="prefetch" href="/assets/js/120.bd63d15a.js"><link rel="prefetch" href="/assets/js/121.1ee2dbc7.js"><link rel="prefetch" href="/assets/js/122.c9f1eb02.js"><link rel="prefetch" href="/assets/js/123.843e99a4.js"><link rel="prefetch" href="/assets/js/124.15588e4d.js"><link rel="prefetch" href="/assets/js/125.0163dc55.js"><link rel="prefetch" href="/assets/js/126.c96d9d45.js"><link rel="prefetch" href="/assets/js/127.078d6db5.js"><link rel="prefetch" href="/assets/js/128.91353db2.js"><link rel="prefetch" href="/assets/js/129.1dd3b721.js"><link rel="prefetch" href="/assets/js/13.2c8fd3b7.js"><link rel="prefetch" href="/assets/js/130.4c578938.js"><link rel="prefetch" href="/assets/js/131.477d2399.js"><link rel="prefetch" href="/assets/js/132.720199ce.js"><link rel="prefetch" href="/assets/js/133.558a63f0.js"><link rel="prefetch" href="/assets/js/134.cc3e65c7.js"><link rel="prefetch" href="/assets/js/135.dea66268.js"><link rel="prefetch" href="/assets/js/136.9a281e71.js"><link rel="prefetch" href="/assets/js/137.d83169e7.js"><link rel="prefetch" href="/assets/js/14.0be415a3.js"><link rel="prefetch" href="/assets/js/15.033ce865.js"><link rel="prefetch" href="/assets/js/16.1f271759.js"><link rel="prefetch" href="/assets/js/17.46e86fb7.js"><link rel="prefetch" href="/assets/js/18.f84b0cd3.js"><link rel="prefetch" href="/assets/js/19.5be064de.js"><link rel="prefetch" href="/assets/js/2.9c825023.js"><link rel="prefetch" href="/assets/js/20.7b514f8a.js"><link rel="prefetch" href="/assets/js/21.7a717827.js"><link rel="prefetch" href="/assets/js/22.a3a73508.js"><link rel="prefetch" href="/assets/js/23.c4141a45.js"><link rel="prefetch" href="/assets/js/24.6fdb3bcb.js"><link rel="prefetch" href="/assets/js/25.b3799c92.js"><link rel="prefetch" href="/assets/js/26.e19da4bd.js"><link rel="prefetch" href="/assets/js/27.df138f52.js"><link rel="prefetch" href="/assets/js/28.61ac18f1.js"><link rel="prefetch" href="/assets/js/29.e2c10c32.js"><link rel="prefetch" href="/assets/js/30.66b7baad.js"><link rel="prefetch" href="/assets/js/31.345a569e.js"><link rel="prefetch" href="/assets/js/32.0d5ed02b.js"><link rel="prefetch" href="/assets/js/33.b59144c6.js"><link rel="prefetch" href="/assets/js/34.96cafeb7.js"><link rel="prefetch" href="/assets/js/35.79b6ee92.js"><link rel="prefetch" href="/assets/js/36.4784095c.js"><link rel="prefetch" href="/assets/js/37.f09b65d9.js"><link rel="prefetch" href="/assets/js/38.fadb8e5d.js"><link rel="prefetch" href="/assets/js/39.8f1f6bed.js"><link rel="prefetch" href="/assets/js/40.1b8a58ce.js"><link rel="prefetch" href="/assets/js/41.bfc9f83f.js"><link rel="prefetch" href="/assets/js/42.d03008e9.js"><link rel="prefetch" href="/assets/js/43.b048810e.js"><link rel="prefetch" href="/assets/js/44.f923f31d.js"><link rel="prefetch" href="/assets/js/45.2c930054.js"><link rel="prefetch" href="/assets/js/46.e6984bb3.js"><link rel="prefetch" href="/assets/js/47.070bf87f.js"><link rel="prefetch" href="/assets/js/48.d1cd5fdc.js"><link rel="prefetch" href="/assets/js/49.9697a970.js"><link rel="prefetch" href="/assets/js/50.31752895.js"><link rel="prefetch" href="/assets/js/51.de748d3f.js"><link rel="prefetch" href="/assets/js/52.77e466b2.js"><link rel="prefetch" href="/assets/js/53.6b00e605.js"><link rel="prefetch" href="/assets/js/54.c1ecbe14.js"><link rel="prefetch" href="/assets/js/55.79f3f9da.js"><link rel="prefetch" href="/assets/js/56.208e3ebd.js"><link rel="prefetch" href="/assets/js/57.340ba9bf.js"><link rel="prefetch" href="/assets/js/58.7cb089ed.js"><link rel="prefetch" href="/assets/js/59.46686e73.js"><link rel="prefetch" href="/assets/js/6.0540b804.js"><link rel="prefetch" href="/assets/js/60.029f16f2.js"><link rel="prefetch" href="/assets/js/61.8304fb57.js"><link rel="prefetch" href="/assets/js/62.d5ca7d62.js"><link rel="prefetch" href="/assets/js/63.30539139.js"><link rel="prefetch" href="/assets/js/64.440f6392.js"><link rel="prefetch" href="/assets/js/65.d875732b.js"><link rel="prefetch" href="/assets/js/66.26b6b6ed.js"><link rel="prefetch" href="/assets/js/67.ebc002d1.js"><link rel="prefetch" href="/assets/js/68.0357f63d.js"><link rel="prefetch" href="/assets/js/69.68d4724d.js"><link rel="prefetch" href="/assets/js/7.cbea04fe.js"><link rel="prefetch" href="/assets/js/70.7bc8aa47.js"><link rel="prefetch" href="/assets/js/71.1ee14a06.js"><link rel="prefetch" href="/assets/js/72.fb7e3f95.js"><link rel="prefetch" href="/assets/js/73.69608058.js"><link rel="prefetch" href="/assets/js/74.3a796b41.js"><link rel="prefetch" href="/assets/js/75.e50b69a9.js"><link rel="prefetch" href="/assets/js/76.d6faa97f.js"><link rel="prefetch" href="/assets/js/77.74561dfb.js"><link rel="prefetch" href="/assets/js/78.3349faa3.js"><link rel="prefetch" href="/assets/js/79.5ac33792.js"><link rel="prefetch" href="/assets/js/8.289c3aaa.js"><link rel="prefetch" href="/assets/js/80.13f7f31b.js"><link rel="prefetch" href="/assets/js/81.89a20768.js"><link rel="prefetch" href="/assets/js/82.811fb389.js"><link rel="prefetch" href="/assets/js/83.abc66083.js"><link rel="prefetch" href="/assets/js/84.2c3f2d7f.js"><link rel="prefetch" href="/assets/js/85.f438aeba.js"><link rel="prefetch" href="/assets/js/86.5a0a00f9.js"><link rel="prefetch" href="/assets/js/87.3e2975d8.js"><link rel="prefetch" href="/assets/js/88.8ee662a2.js"><link rel="prefetch" href="/assets/js/89.d6221ac4.js"><link rel="prefetch" href="/assets/js/9.2b7ba152.js"><link rel="prefetch" href="/assets/js/90.32003915.js"><link rel="prefetch" href="/assets/js/91.7f918cd3.js"><link rel="prefetch" href="/assets/js/93.321454b9.js"><link rel="prefetch" href="/assets/js/94.1b6826c1.js"><link rel="prefetch" href="/assets/js/95.d421861e.js"><link rel="prefetch" href="/assets/js/96.f1c49378.js"><link rel="prefetch" href="/assets/js/97.cf3e1cea.js"><link rel="prefetch" href="/assets/js/98.c12cdb95.js"><link rel="prefetch" href="/assets/js/99.c508ca79.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.aee093c5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7a857d1b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Teaclave</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/community/" class="nav-link">
  Community
</a></div><div class="nav-item"><a href="/download/" class="nav-link">
  Download
</a></div><div class="nav-item"><a href="/contributors/" class="nav-link">
  Contributors
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Documentation" class="dropdown-title"><span class="title">Documentation</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/" class="nav-link">
  Teaclave
</a></li><li class="dropdown-item"><!----> <a href="/sgx-sdk-docs/" class="nav-link">
  Teaclave SGX SDK
</a></li><li class="dropdown-item"><!----> <a href="/trustzone-sdk-docs/" class="nav-link router-link-active">
  Teaclave TrustZone SDK
</a></li></ul></div></div><div class="nav-item"><a href="/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API Docs" class="dropdown-title"><span class="title">API Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/client-sdk-rust/" target="_self" rel="" class="nav-link external">
  Teaclave Client SDK (Rust)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/client-sdk-python/" target="_self" rel="" class="nav-link external">
  Teaclave Client SDK (Python)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/sgx-sdk/" target="_self" rel="" class="nav-link external">
  Teaclave SGX SDK
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/crates-enclave/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (Enclave)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/crates-app/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (App)
  <!----></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Repository" class="dropdown-title"><span class="title">Repository</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-sgx-sdk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave SGX SDK
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-trustzone-sdk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave TrustZone SDK
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-website" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Apache Software Foundation" class="dropdown-title"><span class="title">ASF</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ASF Homepage
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  License
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Sponsorship
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Security
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Thanks
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Current Event
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/community/" class="nav-link">
  Community
</a></div><div class="nav-item"><a href="/download/" class="nav-link">
  Download
</a></div><div class="nav-item"><a href="/contributors/" class="nav-link">
  Contributors
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Documentation" class="dropdown-title"><span class="title">Documentation</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/" class="nav-link">
  Teaclave
</a></li><li class="dropdown-item"><!----> <a href="/sgx-sdk-docs/" class="nav-link">
  Teaclave SGX SDK
</a></li><li class="dropdown-item"><!----> <a href="/trustzone-sdk-docs/" class="nav-link router-link-active">
  Teaclave TrustZone SDK
</a></li></ul></div></div><div class="nav-item"><a href="/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API Docs" class="dropdown-title"><span class="title">API Docs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/client-sdk-rust/" target="_self" rel="" class="nav-link external">
  Teaclave Client SDK (Rust)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/client-sdk-python/" target="_self" rel="" class="nav-link external">
  Teaclave Client SDK (Python)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/sgx-sdk/" target="_self" rel="" class="nav-link external">
  Teaclave SGX SDK
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/crates-enclave/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (Enclave)
  <!----></a></li><li class="dropdown-item"><!----> <a href="https://teaclave.apache.org/api-docs/crates-app/" target="_self" rel="" class="nav-link external">
  Crates in Teaclave (App)
  <!----></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Repository" class="dropdown-title"><span class="title">Repository</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-sgx-sdk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave SGX SDK
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-trustzone-sdk" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave TrustZone SDK
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/apache/incubator-teaclave-website" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Teaclave Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Apache Software Foundation" class="dropdown-title"><span class="title">ASF</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ASF Homepage
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  License
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Sponsorship
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Security
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Thanks
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Current Event
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Development</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/trustzone-sdk-docs/getting-started-with-optee-for-qemu-armv8/" class="active sidebar-link">Getting Started with OP-TEE for QEMU ARMv8</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="getting-started-with-op-tee-for-qemu-armv8"><a href="#getting-started-with-op-tee-for-qemu-armv8" class="header-anchor">#</a> Getting Started with OP-TEE for QEMU ARMv8</h1> <p>This tutorial summarizes the necessary steps of preparing an OP-TEE enabled
QEMU environment and executing the compiled programs of our SDK. You may also
check <a href="https://optee.readthedocs.io/en/latest/building/devices/qemu.html#qemu-v8" target="_blank" rel="noopener noreferrer">OP-TEE documentation</a>
to find more information about setting up the QEMU or introduction of OP-TEE
project.</p> <p>To run examples on the QEMU ARMv8 emulator, we need first build OP-TEE for QEMU
ARMv8. You can install dependencies with this
<a href="https://optee.readthedocs.io/en/latest/building/prerequisites.html" target="_blank" rel="noopener noreferrer">instruction</a>
or use our <a href="https://github.com/mesalock-linux/rust-optee-trustzone-sdk/blob/master/Dockerfile" target="_blank" rel="noopener noreferrer">Dockerfile</a>.</p> <p>Download OP-TEE for QEMU ARMv8 source code.</p> <div class="language-sh extra-class"><pre class="language-text"><code>$ mkdir -p ~/bin
$ curl https://storage.googleapis.com/git-repo-downloads/repo-1 &gt; ~/bin/repo &amp;&amp; chmod a+x ~/bin/repo
$ export PATH=~/bin:$PATH
$ mkdir optee-qemuv8-3.8.0 &amp;&amp; cd optee-qemuv8-3.8.0 &amp;&amp; \
  repo init -u https://github.com/OP-TEE/manifest.git -m qemu_v8.xml -b 3.8.0 &amp;&amp; \
  repo sync -j4 --no-clone-bundle
</code></pre></div><p>Build OP-TEE for QEMU ARMv8 and images.</p> <div class="language-sh extra-class"><pre class="language-text"><code>$ cd build
$ make -j2 toolchains &amp;&amp; \
  make QEMU_VIRTFS_ENABLE=y CFG_TEE_RAM_VA_SIZE=0x00300000
</code></pre></div><p>Create a shared folder to share example host apps and TAs with QEMU guest system.</p> <p>Note: the path <code>/project/root/dir/</code> should be replaced as the root directory of your local project &quot;rust-optee-trustzone-sdk&quot;.</p> <div class="language-sh extra-class"><pre class="language-text"><code>$ mkdir shared_folder
$ (cd /project/root/dir/ &amp;&amp; make examples-install)
$ cp -r /project/root/dir/out/* shared_folder/
</code></pre></div><p>Run QEMU.</p> <div class="language-sh extra-class"><pre class="language-text"><code>$ make run-only QEMU_VIRTFS_ENABLE=y QEMU_VIRTFS_HOST_DIR=$(pwd)/shared_folder
</code></pre></div><p>After the QEMU has been booted, you need to mount the shared folder in QEMU guest system (username: root), in order to access the compiled CA/TA from QEMU.</p> <div class="language-sh extra-class"><pre class="language-text"><code>$ mkdir shared &amp;&amp; mount -t 9p -o trans=virtio host shared
</code></pre></div><p>Also, the passed-in TA should be copied to the corresponding directory for the secure-world to execute.</p> <div class="language-sh extra-class"><pre class="language-text"><code>$ cd shared &amp;&amp; cp ta/*.ta /lib/optee_armtz/
</code></pre></div><p>Execute host apps.</p> <div class="language-sh extra-class"><pre class="language-text"><code>$ cd host
$ ./hello_world
original value is 29
inc value is 129
dec value is 29
Success
</code></pre></div><p>Note that if you are under a environment without GUI, you please comment out the following code in <code>qemu_v8.mk</code> and use <code>nc</code> instead.</p> <div class="language- extra-class"><pre class="language-text"><code>diff --git a/qemu_v8.mk b/qemu_v8.mk
index 8271590..1c4a91b 100644
--- a/qemu_v8.mk
+++ b/qemu_v8.mk
@@ -163,9 +163,9 @@ run-only:
        ln -sf $(ROOT)/out-br/images/rootfs.cpio.gz $(BINARIES_PATH)/
        $(call check-terminal)
        $(call run-help)
-       $(call launch-terminal,54320,&quot;Normal World&quot;)
-       $(call launch-terminal,54321,&quot;Secure World&quot;)
-       $(call wait-for-ports,54320,54321)
+       # $(call launch-terminal,54320,&quot;Normal World&quot;)
+       # $(call launch-terminal,54321,&quot;Secure World&quot;)
+       # $(call wait-for-ports,54320,54321)
        cd $(BINARIES_PATH) &amp;&amp; $(QEMU_PATH)/aarch64-softmmu/qemu-system-aarch64 \
                -nographic \
                -serial tcp:localhost:54320 -serial tcp:localhost:54321 \
</code></pre></div><p>Before start QEMU, run two <code>nc</code> to listen port <code>54320</code> and <code>54321</code>.</p> <div class="language- extra-class"><pre class="language-text"><code>$ nc -l 127.0.0.1 -p 54320
$ nc -l 127.0.0.1 -p 54321
</code></pre></div><p>Then open QEMU by <code>make run-only</code>, and start by input <code>c</code>.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/16/2021, 2:53:34 PM</span></div></footer> <!---->  <div class="footer">
    Apache Teaclave (incubating) is an effort undergoing incubation at The Apache
    Software Foundation (ASF), sponsored by the Apache Incubator.
    Incubation is required of all newly accepted projects until a further review
    indicates that the infrastructure, communications, and decision making process
    have stabilized in a manner consistent with other successful ASF projects. While
    incubation status is not necessarily a reflection of the completeness or
    stability of the code, it does indicate that the project has yet to be fully
    endorsed by the ASF.
    Copyright © 2020 The Apache Software Foundation.
    Licensed under the Apache License, Version 2.0.
    Apache Teaclave, Apache, the Apache feather, and the Apache Teaclave project logo are either
    trademarks or registered trademarks of the Apache Software Foundation.
  </div></main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.99e54d87.js" defer></script><script src="/assets/js/5.ad581026.js" defer></script><script src="/assets/js/1.c33c3cc0.js" defer></script><script src="/assets/js/92.6164c0e6.js" defer></script>
  </body>
</html>
